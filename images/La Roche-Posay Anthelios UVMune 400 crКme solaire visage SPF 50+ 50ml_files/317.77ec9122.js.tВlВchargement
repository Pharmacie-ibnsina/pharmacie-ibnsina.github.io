/*! For license information please see 317.77ec9122.js.LICENSE.txt */
(self.webpackChunkpharma_gdd_com=self.webpackChunkpharma_gdd_com||[]).push([[317],{74444:function(e,t,n){"use strict";n.d(t,{BH:function(){return g},DV:function(){return R},GJ:function(){return x},L:function(){return h},LL:function(){return E},Pz:function(){return k},UI:function(){return O},US:function(){return l},Yr:function(){return y},ZR:function(){return S},b$:function(){return v},cI:function(){return I},dS:function(){return z},eu:function(){return w},g5:function(){return a},gK:function(){return j},gQ:function(){return U},h$:function(){return u},hl:function(){return b},hu:function(){return o},m9:function(){return V},p$:function(){return p},r3:function(){return P},uI:function(){return _},ug:function(){return H},vZ:function(){return L},w9:function(){return N},xO:function(){return F},xb:function(){return D},zI:function(){return C}});const i=!1,r=!1,s="${JSCORE_VERSION}",o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+s+") INTERNAL ASSERT FAILED: "+e)},c=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=r>>2,u=(3&r)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(c(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==s||null==o||null==a)throw Error();const c=r<<2|s>>4;if(i.push(c),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},u=function(e){const t=c(e);return l.encodeByteArray(t,!0)},h=function(e){return u(e).replace(/\./g,"")},d=function(e){try{return l.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function p(e){return f(void 0,e)}function f(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=f(e[n],t[n]));return e}class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function m(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){return!0===i||!0===r}function b(){return"object"==typeof indexedDB}function w(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}function C(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class S extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,S.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,E.prototype.create)}}class E{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(T,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new S(i,o,n)}}const T=/\{\$([^}]+)}/g;function I(e){return JSON.parse(e)}function k(e){return JSON.stringify(e)}const A=function(e){let t={},n={},i={},r="";try{const s=e.split(".");t=I(d(s[0])||""),n=I(d(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:i,signature:r}},N=function(e){const t=A(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},x=function(e){const t=A(e).claims;return"object"==typeof t&&!0===t.admin};function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function D(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function O(e,t,n){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function L(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(M(n)&&M(s)){if(!L(n,s))return!1}else if(n!==s)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function M(e){return null!==e&&"object"==typeof e}function F(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}class U{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let i=0;i<16;i++)n[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(t<<1|t>>>31)}let i,r,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(i=c^o&(a^c),r=1518500249):(i=o^a^c,r=1859775393):e<60?(i=o&a|c&(o|a),r=2400959708):(i=o^a^c,r=3395469782);const t=(s<<5|s>>>27)+i+l+r+n[e]&4294967295;l=c,c=a,a=4294967295&(o<<30|o>>>2),o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let i=24;i>=0;i-=8)e[n]=this.chain_[t]>>i&255,++n;return e}}function j(e,t){return`${e} failed: ${t} argument `}const z=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){const t=r-55296;i++,o(i<e.length,"Surrogate pair missing trail surrogate.");r=65536+(t<<10)+(e.charCodeAt(i)-56320)}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},H=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function V(e){return e&&e._delegate?e._delegate:e}},25179:function(e,t,n){"use strict";n.d(t,{B:function(){return s}});var i=n(70655),r=n(6308),s=function(){function e(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];this.root=e,this.initialize.apply(this,(0,i.ev)([],(0,i.CR)(n))),this.foundation=void 0===t?this.getDefaultFoundation():t,this.foundation.init(),this.initialSyncWithDOM()}return e.attachTo=function(t){return new e(t,new r.K({}))},e.prototype.initialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")},e.prototype.initialSyncWithDOM=function(){},e.prototype.destroy=function(){this.foundation.destroy()},e.prototype.listen=function(e,t,n){this.root.addEventListener(e,t,n)},e.prototype.unlisten=function(e,t,n){this.root.removeEventListener(e,t,n)},e.prototype.emit=function(e,t,n){var i;void 0===n&&(n=!1),"function"==typeof CustomEvent?i=new CustomEvent(e,{bubbles:n,detail:t}):(i=document.createEvent("CustomEvent")).initCustomEvent(e,n,!1,t),this.root.dispatchEvent(i)},e}()},6308:function(e,t,n){"use strict";n.d(t,{K:function(){return i}});var i=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}()},32044:function(e,t,n){"use strict";n.d(t,{x:function(){return h}});var i=n(70655),r=n(25179),s=n(78889),o=n(6308),a={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},c={ARIA_LABEL:"aria-label",ARIA_PRESSED:"aria-pressed",DATA_ARIA_LABEL_OFF:"data-aria-label-off",DATA_ARIA_LABEL_ON:"data-aria-label-on",CHANGE_EVENT:"MDCIconButtonToggle:change"},l=function(e){function t(n){var r=e.call(this,(0,i.pi)((0,i.pi)({},t.defaultAdapter),n))||this;return r.hasToggledAriaLabel=!1,r}return(0,i.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return a},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},getAttr:function(){return null},setAttr:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this.adapter.getAttr(c.DATA_ARIA_LABEL_ON),t=this.adapter.getAttr(c.DATA_ARIA_LABEL_OFF);if(e&&t){if(null!==this.adapter.getAttr(c.ARIA_PRESSED))throw new Error("MDCIconButtonToggleFoundation: Button should not set `aria-pressed` if it has a toggled aria label.");this.hasToggledAriaLabel=!0}else this.adapter.setAttr(c.ARIA_PRESSED,String(this.isOn()))},t.prototype.handleClick=function(){this.toggle(),this.adapter.notifyChange({isOn:this.isOn()})},t.prototype.isOn=function(){return this.adapter.hasClass(a.ICON_BUTTON_ON)},t.prototype.toggle=function(e){if(void 0===e&&(e=!this.isOn()),e?this.adapter.addClass(a.ICON_BUTTON_ON):this.adapter.removeClass(a.ICON_BUTTON_ON),this.hasToggledAriaLabel){var t=e?this.adapter.getAttr(c.DATA_ARIA_LABEL_ON):this.adapter.getAttr(c.DATA_ARIA_LABEL_OFF);this.adapter.setAttr(c.ARIA_LABEL,t||"")}else this.adapter.setAttr(c.ARIA_PRESSED,""+e)},t}(o.K),u=l.strings,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rippleComponent=t.createRipple(),t}return(0,i.ZT)(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){var e=this;this.handleClick=function(){e.foundation.handleClick()},this.listen("click",this.handleClick)},t.prototype.destroy=function(){this.unlisten("click",this.handleClick),this.ripple.destroy(),e.prototype.destroy.call(this)},t.prototype.getDefaultFoundation=function(){var e=this;return new l({addClass:function(t){return e.root.classList.add(t)},hasClass:function(t){return e.root.classList.contains(t)},notifyChange:function(t){e.emit(u.CHANGE_EVENT,t)},removeClass:function(t){return e.root.classList.remove(t)},getAttr:function(t){return e.root.getAttribute(t)},setAttr:function(t,n){return e.root.setAttribute(t,n)}})},Object.defineProperty(t.prototype,"ripple",{get:function(){return this.rippleComponent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"on",{get:function(){return this.foundation.isOn()},set:function(e){this.foundation.toggle(e)},enumerable:!1,configurable:!0}),t.prototype.createRipple=function(){var e=new s.F(this.root);return e.unbounded=!0,e},t}(r.B)},78889:function(e,t,n){"use strict";n.d(t,{F:function(){return m}});var i=n(70655),r=n(25179);function s(e){return void 0===e&&(e=window),!!function(e){void 0===e&&(e=window);var t=!1;try{var n={get passive(){return t=!0,!1}},i=function(){};e.document.addEventListener("test",i,n),e.document.removeEventListener("test",i,n)}catch(e){t=!1}return t}(e)&&{passive:!0}}function o(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}var a,c=n(6308),l={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},u={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},h={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};var d=["touchstart","pointerdown","mousedown","keydown"],p=["touchend","pointerup","mouseup","contextmenu"],f=[],g=function(e){function t(n){var r=e.call(this,(0,i.pi)((0,i.pi)({},t.defaultAdapter),n))||this;return r.activationAnimationHasEnded=!1,r.activationTimer=0,r.fgDeactivationRemovalTimer=0,r.fgScale="0",r.frame={width:0,height:0},r.initialSize=0,r.layoutFrame=0,r.maxRadius=0,r.unboundedCoords={left:0,top:0},r.activationState=r.defaultActivationState(),r.activationTimerCallback=function(){r.activationAnimationHasEnded=!0,r.runDeactivationUXLogicIfReady()},r.activateHandler=function(e){r.activateImpl(e)},r.deactivateHandler=function(){r.deactivateImpl()},r.focusHandler=function(){r.handleFocus()},r.blurHandler=function(){r.handleBlur()},r.resizeHandler=function(){r.layout()},r}return(0,i.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return u},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this,n=this.supportsPressRipple();if(this.registerRootHandlers(n),n){var i=t.cssClasses,r=i.ROOT,s=i.UNBOUNDED;requestAnimationFrame((function(){e.adapter.addClass(r),e.adapter.isUnbounded()&&(e.adapter.addClass(s),e.layoutInternal())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var n=t.cssClasses,i=n.ROOT,r=n.UNBOUNDED;requestAnimationFrame((function(){e.adapter.removeClass(i),e.adapter.removeClass(r),e.removeCssVars()}))}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},t.prototype.activate=function(e){this.activateImpl(e)},t.prototype.deactivate=function(){this.deactivateImpl()},t.prototype.layout=function(){var e=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame((function(){e.layoutInternal(),e.layoutFrame=0}))},t.prototype.setUnbounded=function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers=function(e){var t,n;if(e){try{for(var r=(0,i.XA)(d),s=r.next();!s.done;s=r.next()){var o=s.value;this.adapter.registerInteractionHandler(o,this.activateHandler)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},t.prototype.registerDeactivationHandlers=function(e){var t,n;if("keydown"===e.type)this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var r=(0,i.XA)(p),s=r.next();!s.done;s=r.next()){var o=s.value;this.adapter.registerDocumentInteractionHandler(o,this.deactivateHandler)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},t.prototype.deregisterRootHandlers=function(){var e,t;try{for(var n=(0,i.XA)(d),r=n.next();!r.done;r=n.next()){var s=r.value;this.adapter.deregisterInteractionHandler(s,this.activateHandler)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},t.prototype.deregisterDeactivationHandlers=function(){var e,t;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var n=(0,i.XA)(p),r=n.next();!r.done;r=n.next()){var s=r.value;this.adapter.deregisterDocumentInteractionHandler(s,this.deactivateHandler)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.removeCssVars=function(){var e=this,n=t.strings;Object.keys(n).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter.updateCssVariable(n[t],null)}))},t.prototype.activateImpl=function(e){var t=this;if(!this.adapter.isSurfaceDisabled()){var n=this.activationState;if(!n.isActivated){var i=this.previousActivationEvent;if(!(i&&void 0!==e&&i.type!==e.type))n.isActivated=!0,n.isProgrammatic=void 0===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&f.length>0&&f.some((function(e){return t.adapter.containsEventTarget(e)}))?this.resetActivationState():(void 0!==e&&(f.push(e.target),this.registerDeactivationHandlers(e)),n.wasElementMadeActive=this.checkElementMadeActive(e),n.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame((function(){f=[],n.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive(e),n.wasElementMadeActive&&t.animateActivation()),n.wasElementMadeActive||(t.activationState=t.defaultActivationState())})))}}},t.prototype.checkElementMadeActive=function(e){return void 0===e||"keydown"!==e.type||this.adapter.isSurfaceActive()},t.prototype.animateActivation=function(){var e=this,n=t.strings,i=n.VAR_FG_TRANSLATE_START,r=n.VAR_FG_TRANSLATE_END,s=t.cssClasses,o=s.FG_DEACTIVATION,a=s.FG_ACTIVATION,c=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var l="",u="";if(!this.adapter.isUnbounded()){var h=this.getFgTranslationCoordinates(),d=h.startPoint,p=h.endPoint;l=d.x+"px, "+d.y+"px",u=p.x+"px, "+p.y+"px"}this.adapter.updateCssVariable(i,l),this.adapter.updateCssVariable(r,u),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(o),this.adapter.computeBoundingRect(),this.adapter.addClass(a),this.activationTimer=setTimeout((function(){e.activationTimerCallback()}),c)},t.prototype.getFgTranslationCoordinates=function(){var e,t=this.activationState,n=t.activationEvent;return{startPoint:e={x:(e=t.wasActivatedByPointer?function(e,t,n){if(!e)return{x:0,y:0};var i,r,s=t.x,o=t.y,a=s+n.left,c=o+n.top;if("touchstart"===e.type){var l=e;i=l.changedTouches[0].pageX-a,r=l.changedTouches[0].pageY-c}else{var u=e;i=u.pageX-a,r=u.pageY-c}return{x:i,y:r}}(n,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):{x:this.frame.width/2,y:this.frame.height/2}).x-this.initialSize/2,y:e.y-this.initialSize/2},endPoint:{x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2}}},t.prototype.runDeactivationUXLogicIfReady=function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,i=this.activationState,r=i.hasDeactivationUXRun,s=i.isActivated;(r||!s)&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(n),this.fgDeactivationRemovalTimer=setTimeout((function(){e.adapter.removeClass(n)}),h.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(e),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState=function(){var e=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout((function(){return e.previousActivationEvent=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivateImpl=function(){var e=this,t=this.activationState;if(t.isActivated){var n=(0,i.pi)({},t);t.isProgrammatic?(requestAnimationFrame((function(){e.animateDeactivation(n)})),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame((function(){e.activationState.hasDeactivationUXRun=!0,e.animateDeactivation(n),e.resetActivationState()})))}},t.prototype.animateDeactivation=function(e){var t=e.wasActivatedByPointer,n=e.wasElementMadeActive;(t||n)&&this.runDeactivationUXLogicIfReady()},t.prototype.layoutInternal=function(){var e=this;this.frame=this.adapter.computeBoundingRect();var n=Math.max(this.frame.height,this.frame.width);this.maxRadius=this.adapter.isUnbounded()?n:Math.sqrt(Math.pow(e.frame.width,2)+Math.pow(e.frame.height,2))+t.numbers.PADDING;var i=Math.floor(n*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&i%2!=0?this.initialSize=i-1:this.initialSize=i,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},t.prototype.updateLayoutCssVars=function(){var e=t.strings,n=e.VAR_FG_SIZE,i=e.VAR_LEFT,r=e.VAR_TOP,s=e.VAR_FG_SCALE;this.adapter.updateCssVariable(n,this.initialSize+"px"),this.adapter.updateCssVariable(s,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(i,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(r,this.unboundedCoords.top+"px"))},t}(c.K),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disabled=!1,t}return(0,i.ZT)(t,e),t.attachTo=function(e,n){void 0===n&&(n={isUnbounded:void 0});var i=new t(e);return void 0!==n.isUnbounded&&(i.unbounded=n.isUnbounded),i},t.createAdapter=function(e){return{addClass:function(t){return e.root.classList.add(t)},browserSupportsCssVars:function(){return function(e,t){void 0===t&&(t=!1);var n,i=e.CSS;if("boolean"==typeof a&&!t)return a;if(!i||"function"!=typeof i.supports)return!1;var r=i.supports("--css-vars","yes"),s=i.supports("(--css-vars: yes)")&&i.supports("color","#00000000");return n=r||s,t||(a=n),n}(window)},computeBoundingRect:function(){return e.root.getBoundingClientRect()},containsEventTarget:function(t){return e.root.contains(t)},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,s())},deregisterInteractionHandler:function(t,n){return e.root.removeEventListener(t,n,s())},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},isSurfaceActive:function(){return o(e.root,":active")},isSurfaceDisabled:function(){return Boolean(e.disabled)},isUnbounded:function(){return Boolean(e.unbounded)},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,s())},registerInteractionHandler:function(t,n){return e.root.addEventListener(t,n,s())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},removeClass:function(t){return e.root.classList.remove(t)},updateCssVariable:function(t,n){return e.root.style.setProperty(t,n)}}},Object.defineProperty(t.prototype,"unbounded",{get:function(){return Boolean(this.isUnbounded)},set:function(e){this.isUnbounded=Boolean(e),this.setUnbounded()},enumerable:!1,configurable:!0}),t.prototype.activate=function(){this.foundation.activate()},t.prototype.deactivate=function(){this.foundation.deactivate()},t.prototype.layout=function(){this.foundation.layout()},t.prototype.getDefaultFoundation=function(){return new g(t.createAdapter(this))},t.prototype.initialSyncWithDOM=function(){var e=this.root;this.isUnbounded="mdcRippleIsUnbounded"in e.dataset},t.prototype.setUnbounded=function(){this.foundation.setUnbounded(Boolean(this.isUnbounded))},t}(r.B)},39483:function(e,t,n){var i=n(4411),r=n(66330),s=TypeError;e.exports=function(e){if(i(e))return e;throw s(r(e)+" is not a constructor")}},25787:function(e,t,n){var i=n(47976),r=TypeError;e.exports=function(e,t){if(i(t,e))return e;throw r("Incorrect invocation")}},94362:function(e,t,n){var i=n(41589),r=Math.floor,s=function(e,t){var n=e.length,c=r(n/2);return n<8?o(e,t):a(e,s(i(e,0,c),t),s(i(e,c),t),t)},o=function(e,t){for(var n,i,r=e.length,s=1;s<r;){for(i=s,n=e[s];i&&t(e[i-1],n)>0;)e[i]=e[--i];i!==s++&&(e[i]=n)}return e},a=function(e,t,n,i){for(var r=t.length,s=n.length,o=0,a=0;o<r||a<s;)e[o+a]=o<r&&a<s?i(t[o],n[a])<=0?t[o++]:n[a++]:o<r?t[o++]:n[a++];return e};e.exports=s},89190:function(e,t,n){var i=n(98052);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},85117:function(e,t,n){"use strict";var i=n(66330),r=TypeError;e.exports=function(e,t){if(!delete e[t])throw r("Cannot delete property "+i(t)+" of "+i(e))}},68886:function(e,t,n){var i=n(88113).match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},30256:function(e,t,n){var i=n(88113);e.exports=/MSIE|Trident/.test(i)},98008:function(e,t,n){var i=n(88113).match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},79587:function(e,t,n){var i=n(60614),r=n(70111),s=n(27674);e.exports=function(e,t,n){var o,a;return s&&i(o=t.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&s(e,a),e}},590:function(e,t,n){var i=n(47293),r=n(5112),s=n(31913),o=r("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),n+=i+e})),s&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},21574:function(e,t,n){"use strict";var i=n(19781),r=n(1702),s=n(46916),o=n(47293),a=n(81956),c=n(25181),l=n(55296),u=n(47908),h=n(68361),d=Object.assign,p=Object.defineProperty,f=r([].concat);e.exports=!d||o((function(){if(i&&1!==d({b:1},d(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=d({},e)[n]||a(d({},t)).join("")!=r}))?function(e,t){for(var n=u(e),r=arguments.length,o=1,d=c.f,p=l.f;r>o;)for(var g,m=h(arguments[o++]),_=d?f(a(m),d(m)):a(m),v=_.length,y=0;v>y;)g=_[y++],i&&!s(p,m,g)||(n[g]=m[g]);return n}:d},44699:function(e,t,n){var i=n(19781),r=n(1702),s=n(81956),o=n(45656),a=r(n(55296).f),c=r([].push),l=function(e){return function(t){for(var n,r=o(t),l=s(r),u=l.length,h=0,d=[];u>h;)n=l[h++],i&&!a(r,n)||c(d,e?[n,r[n]]:r[n]);return d}};e.exports={entries:l(!0),values:l(!1)}},2626:function(e,t,n){var i=n(3070).f;e.exports=function(e,t,n){n in e||i(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},34706:function(e,t,n){var i=n(46916),r=n(92597),s=n(47976),o=n(67066),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||r(e,"flags")||!s(a,e)?t:i(o,e)}},81150:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},96340:function(e,t,n){"use strict";var i=n(35005),r=n(3070),s=n(5112),o=n(19781),a=s("species");e.exports=function(e){var t=i(e),n=r.f;o&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},36707:function(e,t,n){var i=n(19670),r=n(39483),s=n(5112)("species");e.exports=function(e,t){var n,o=i(e).constructor;return void 0===o||null==(n=i(o)[s])?t:r(n)}},38415:function(e,t,n){"use strict";var i=n(19303),r=n(41340),s=n(84488),o=RangeError;e.exports=function(e){var t=r(s(this)),n="",a=i(e);if(a<0||a==1/0)throw o("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},76091:function(e,t,n){var i=n(76530).PROPER,r=n(47293),s=n(81361);e.exports=function(e){return r((function(){return!!s[e]()||"​᠎"!=="​᠎"[e]()||i&&s[e].name!==e}))}},53111:function(e,t,n){var i=n(1702),r=n(84488),s=n(41340),o=n(81361),a=i("".replace),c="["+o+"]",l=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),h=function(e){return function(t){var n=s(r(t));return 1&e&&(n=a(n,l,"")),2&e&&(n=a(n,u,"")),n}};e.exports={start:h(1),end:h(2),trim:h(3)}},50863:function(e,t,n){var i=n(1702);e.exports=i(1..valueOf)},48053:function(e){var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},81361:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},69600:function(e,t,n){"use strict";var i=n(82109),r=n(1702),s=n(68361),o=n(45656),a=n(9341),c=r([].join),l=s!=Object,u=a("join",",");i({target:"Array",proto:!0,forced:l||!u},{join:function(e){return c(o(this),void 0===e?",":e)}})},2707:function(e,t,n){"use strict";var i=n(82109),r=n(1702),s=n(19662),o=n(47908),a=n(26244),c=n(85117),l=n(41340),u=n(47293),h=n(94362),d=n(9341),p=n(68886),f=n(30256),g=n(7392),m=n(98008),_=[],v=r(_.sort),y=r(_.push),b=u((function(){_.sort(void 0)})),w=u((function(){_.sort(null)})),C=d("sort"),S=!u((function(){if(g)return g<70;if(!(p&&p>3)){if(f)return!0;if(m)return m<603;var e,t,n,i,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)_.push({k:t+i,v:n})}for(_.sort((function(e,t){return t.v-e.v})),i=0;i<_.length;i++)t=_[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));i({target:"Array",proto:!0,forced:b||!w||!C||!S},{sort:function(e){void 0!==e&&s(e);var t=o(this);if(S)return void 0===e?v(t):v(t,e);var n,i,r=[],u=a(t);for(i=0;i<u;i++)i in t&&y(r,t[i]);for(h(r,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:l(t)>l(n)?1:-1}}(e)),n=r.length,i=0;i<n;)t[i]=r[i++];for(;i<u;)c(t,i++);return t}})},56977:function(e,t,n){"use strict";var i=n(82109),r=n(1702),s=n(19303),o=n(50863),a=n(38415),c=n(47293),l=RangeError,u=String,h=Math.floor,d=r(a),p=r("".slice),f=r(1..toFixed),g=function(e,t,n){return 0===t?n:t%2==1?g(e,t-1,n*e):g(e*e,t/2,n)},m=function(e,t,n){for(var i=-1,r=n;++i<6;)r+=t*e[i],e[i]=r%1e7,r=h(r/1e7)},_=function(e,t){for(var n=6,i=0;--n>=0;)i+=e[n],e[n]=h(i/t),i=i%t*1e7},v=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var i=u(e[t]);n=""===n?i:n+d("0",7-i.length)+i}return n};i({target:"Number",proto:!0,forced:c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}))},{toFixed:function(e){var t,n,i,r,a=o(this),c=s(e),h=[0,0,0,0,0,0],f="",y="0";if(c<0||c>20)throw l("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return u(a);if(a<0&&(f="-",a=-a),a>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(a*g(2,69,1))-69)<0?a*g(2,-t,1):a/g(2,t,1),n*=4503599627370496,(t=52-t)>0){for(m(h,0,n),i=c;i>=7;)m(h,1e7,0),i-=7;for(m(h,g(10,i,1),0),i=t-1;i>=23;)_(h,1<<23),i-=23;_(h,1<<i),m(h,1,1),_(h,2),y=v(h)}else m(h,0,n),m(h,1<<-t,0),y=v(h)+d("0",c);return y=c>0?f+((r=y.length)<=c?"0."+d("0",c-r)+y:p(y,0,r-c)+"."+p(y,r-c)):f+y}})},19601:function(e,t,n){var i=n(82109),r=n(21574);i({target:"Object",stat:!0,arity:2,forced:Object.assign!==r},{assign:r})},69720:function(e,t,n){var i=n(82109),r=n(44699).entries;i({target:"Object",stat:!0},{entries:function(e){return r(e)}})},47941:function(e,t,n){var i=n(82109),r=n(47908),s=n(81956);i({target:"Object",stat:!0,forced:n(47293)((function(){s(1)}))},{keys:function(e){return s(r(e))}})},24603:function(e,t,n){var i=n(19781),r=n(17854),s=n(1702),o=n(54705),a=n(79587),c=n(68880),l=n(8006).f,u=n(47976),h=n(47850),d=n(41340),p=n(34706),f=n(52999),g=n(2626),m=n(98052),_=n(47293),v=n(92597),y=n(29909).enforce,b=n(96340),w=n(5112),C=n(9441),S=n(38173),E=w("match"),T=r.RegExp,I=T.prototype,k=r.SyntaxError,A=s(I.exec),N=s("".charAt),x=s("".replace),P=s("".indexOf),R=s("".slice),D=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,O=/a/g,L=/a/g,M=new T(O)!==O,F=f.MISSED_STICKY,U=f.UNSUPPORTED_Y,j=i&&(!M||F||C||S||_((function(){return L[E]=!1,T(O)!=O||T(L)==L||"/a/i"!=T(O,"i")})));if(o("RegExp",j)){for(var z=function(e,t){var n,i,r,s,o,l,f=u(I,this),g=h(e),m=void 0===t,_=[],b=e;if(!f&&g&&m&&e.constructor===z)return e;if((g||u(I,e))&&(e=e.source,m&&(t=p(b))),e=void 0===e?"":d(e),t=void 0===t?"":d(t),b=e,C&&"dotAll"in O&&(i=!!t&&P(t,"s")>-1)&&(t=x(t,/s/g,"")),n=t,F&&"sticky"in O&&(r=!!t&&P(t,"y")>-1)&&U&&(t=x(t,/y/g,"")),S&&(s=function(e){for(var t,n=e.length,i=0,r="",s=[],o={},a=!1,c=!1,l=0,u="";i<=n;i++){if("\\"===(t=N(e,i)))t+=N(e,++i);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:A(D,R(e,i+1))&&(i+=2,c=!0),r+=t,l++;continue;case">"===t&&c:if(""===u||v(o,u))throw new k("Invalid capture group name");o[u]=!0,s[s.length]=[u,l],c=!1,u="";continue}c?u+=t:r+=t}return[r,s]}(e),e=s[0],_=s[1]),o=a(T(e,t),f?this:I,z),(i||r||_.length)&&(l=y(o),i&&(l.dotAll=!0,l.raw=z(function(e){for(var t,n=e.length,i=0,r="",s=!1;i<=n;i++)"\\"!==(t=N(e,i))?s||"."!==t?("["===t?s=!0:"]"===t&&(s=!1),r+=t):r+="[\\s\\S]":r+=t+N(e,++i);return r}(e),n)),r&&(l.sticky=!0),_.length&&(l.groups=_)),e!==b)try{c(o,"source",""===b?"(?:)":b)}catch(e){}return o},H=l(T),V=0;H.length>V;)g(z,T,H[V++]);I.constructor=z,z.prototype=I,m(r,"RegExp",z,{constructor:!0})}b("RegExp")},39714:function(e,t,n){"use strict";var i=n(76530).PROPER,r=n(98052),s=n(19670),o=n(41340),a=n(47293),c=n(34706),l="toString",u=RegExp.prototype.toString,h=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=i&&u.name!=l;(h||d)&&r(RegExp.prototype,l,(function(){var e=s(this);return"/"+o(e.source)+"/"+o(c(e))}),{unsafe:!0})},64765:function(e,t,n){"use strict";var i=n(46916),r=n(27007),s=n(19670),o=n(84488),a=n(81150),c=n(41340),l=n(58173),u=n(97651);r("search",(function(e,t,n){return[function(t){var n=o(this),r=null==t?void 0:l(t,e);return r?i(r,t,n):new RegExp(t)[e](c(n))},function(e){var i=s(this),r=c(e),o=n(t,i,r);if(o.done)return o.value;var l=i.lastIndex;a(l,0)||(i.lastIndex=0);var h=u(i,r);return a(i.lastIndex,l)||(i.lastIndex=l),null===h?-1:h.index}]}))},23123:function(e,t,n){"use strict";var i=n(22104),r=n(46916),s=n(1702),o=n(27007),a=n(47850),c=n(19670),l=n(84488),u=n(36707),h=n(31530),d=n(17466),p=n(41340),f=n(58173),g=n(41589),m=n(97651),_=n(22261),v=n(52999),y=n(47293),b=v.UNSUPPORTED_Y,w=4294967295,C=Math.min,S=[].push,E=s(/./.exec),T=s(S),I=s("".slice),k=!y((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));o("split",(function(e,t,n){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var s=p(l(this)),o=void 0===n?w:n>>>0;if(0===o)return[];if(void 0===e)return[s];if(!a(e))return r(t,s,e,o);for(var c,u,h,d=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,v=new RegExp(e.source,f+"g");(c=r(_,v,s))&&!((u=v.lastIndex)>m&&(T(d,I(s,m,c.index)),c.length>1&&c.index<s.length&&i(S,d,g(c,1)),h=c[0].length,m=u,d.length>=o));)v.lastIndex===c.index&&v.lastIndex++;return m===s.length?!h&&E(v,"")||T(d,""):T(d,I(s,m)),d.length>o?g(d,0,o):d}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:r(t,this,e,n)}:t,[function(t,n){var i=l(this),o=null==t?void 0:f(t,e);return o?r(o,t,i,n):r(s,p(i),t,n)},function(e,i){var r=c(this),o=p(e),a=n(s,r,o,i,s!==t);if(a.done)return a.value;var l=u(r,RegExp),f=r.unicode,g=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(b?"g":"y"),_=new l(b?"^(?:"+r.source+")":r,g),v=void 0===i?w:i>>>0;if(0===v)return[];if(0===o.length)return null===m(_,o)?[o]:[];for(var y=0,S=0,E=[];S<o.length;){_.lastIndex=b?0:S;var k,A=m(_,b?I(o,S):o);if(null===A||(k=C(d(_.lastIndex+(b?S:0)),o.length))===y)S=h(o,S,f);else{if(T(E,I(o,y,S)),E.length===v)return E;for(var N=1;N<=A.length-1;N++)if(T(E,A[N]),E.length===v)return E;S=y=k}}return T(E,I(o,y)),E}]}),!k,b)},73210:function(e,t,n){"use strict";var i=n(82109),r=n(53111).trim;i({target:"String",proto:!0,forced:n(76091)("trim")},{trim:function(){return r(this)}})},65556:function(e,t,n){"use strict";n(66992);var i=n(82109),r=n(17854),s=n(46916),o=n(1702),a=n(19781),c=n(590),l=n(98052),u=n(89190),h=n(58003),d=n(24994),p=n(29909),f=n(25787),g=n(60614),m=n(92597),_=n(49974),v=n(70648),y=n(19670),b=n(70111),w=n(41340),C=n(70030),S=n(79114),E=n(18554),T=n(71246),I=n(48053),k=n(5112),A=n(94362),N=k("iterator"),x="URLSearchParams",P="URLSearchParamsIterator",R=p.set,D=p.getterFor(x),O=p.getterFor(P),L=Object.getOwnPropertyDescriptor,M=function(e){if(!a)return r[e];var t=L(r,e);return t&&t.value},F=M("fetch"),U=M("Request"),j=M("Headers"),z=U&&U.prototype,H=j&&j.prototype,V=r.RegExp,q=r.TypeError,B=r.decodeURIComponent,W=r.encodeURIComponent,$=o("".charAt),K=o([].join),G=o([].push),Y=o("".replace),X=o([].shift),Q=o([].splice),J=o("".split),Z=o("".slice),ee=/\+/g,te=Array(4),ne=function(e){return te[e-1]||(te[e-1]=V("((?:%[\\da-f]{2}){"+e+"})","gi"))},ie=function(e){try{return B(e)}catch(t){return e}},re=function(e){var t=Y(e,ee," "),n=4;try{return B(t)}catch(e){for(;n;)t=Y(t,ne(n--),ie);return t}},se=/[!'()~]|%20/g,oe={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ae=function(e){return oe[e]},ce=function(e){return Y(W(e),se,ae)},le=d((function(e,t){R(this,{type:P,iterator:E(D(e).entries),kind:t})}),"Iterator",(function(){var e=O(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n}),!0),ue=function(e){this.entries=[],this.url=null,void 0!==e&&(b(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===$(e,0)?Z(e,1):e:w(e)))};ue.prototype={type:x,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,i,r,o,a,c,l=T(e);if(l)for(n=(t=E(e,l)).next;!(i=s(n,t)).done;){if(o=(r=E(y(i.value))).next,(a=s(o,r)).done||(c=s(o,r)).done||!s(o,r).done)throw q("Expected sequence with length 2");G(this.entries,{key:w(a.value),value:w(c.value)})}else for(var u in e)m(e,u)&&G(this.entries,{key:u,value:w(e[u])})},parseQuery:function(e){if(e)for(var t,n,i=J(e,"&"),r=0;r<i.length;)(t=i[r++]).length&&(n=J(t,"="),G(this.entries,{key:re(X(n)),value:re(K(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],i=0;i<t.length;)e=t[i++],G(n,ce(e.key)+"="+ce(e.value));return K(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var he=function(){f(this,de);var e=arguments.length>0?arguments[0]:void 0;R(this,new ue(e))},de=he.prototype;if(u(de,{append:function(e,t){I(arguments.length,2);var n=D(this);G(n.entries,{key:w(e),value:w(t)}),n.updateURL()},delete:function(e){I(arguments.length,1);for(var t=D(this),n=t.entries,i=w(e),r=0;r<n.length;)n[r].key===i?Q(n,r,1):r++;t.updateURL()},get:function(e){I(arguments.length,1);for(var t=D(this).entries,n=w(e),i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){I(arguments.length,1);for(var t=D(this).entries,n=w(e),i=[],r=0;r<t.length;r++)t[r].key===n&&G(i,t[r].value);return i},has:function(e){I(arguments.length,1);for(var t=D(this).entries,n=w(e),i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},set:function(e,t){I(arguments.length,1);for(var n,i=D(this),r=i.entries,s=!1,o=w(e),a=w(t),c=0;c<r.length;c++)(n=r[c]).key===o&&(s?Q(r,c--,1):(s=!0,n.value=a));s||G(r,{key:o,value:a}),i.updateURL()},sort:function(){var e=D(this);A(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=D(this).entries,i=_(e,arguments.length>1?arguments[1]:void 0),r=0;r<n.length;)i((t=n[r++]).value,t.key,this)},keys:function(){return new le(this,"keys")},values:function(){return new le(this,"values")},entries:function(){return new le(this,"entries")}},{enumerable:!0}),l(de,N,de.entries,{name:"entries"}),l(de,"toString",(function(){return D(this).serialize()}),{enumerable:!0}),h(he,x),i({global:!0,constructor:!0,forced:!c},{URLSearchParams:he}),!c&&g(j)){var pe=o(H.has),fe=o(H.set),ge=function(e){if(b(e)){var t,n=e.body;if(v(n)===x)return t=e.headers?new j(e.headers):new j,pe(t,"content-type")||fe(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),C(e,{body:S(0,w(n)),headers:S(0,t)})}return e};if(g(F)&&i({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return F(e,arguments.length>1?ge(arguments[1]):{})}}),g(U)){var me=function(e){return f(this,z),new U(e,arguments.length>1?ge(arguments[1]):{})};z.constructor=me,me.prototype=z,i({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:me})}}e.exports={URLSearchParams:he,getState:D}},41637:function(e,t,n){n(65556)},15503:function(e,t,n){"use strict";n.d(t,{ZF:function(){return i.ZF}});var i=n(32238);(0,i.KN)("firebase","9.9.0","app")},2956:function(e,t,n){"use strict";n.d(t,{N8:function(){return Xi},iH:function(){return Vi},Od:function(){return Bi},t8:function(){return Wi}});var i=n(32238),r=n(8463),s=n(74444),o=n(53333);const a="@firebase/database",c="0.13.3";let l="";class u{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,s.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,s.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class h{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,s.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const d=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new u(t)}}catch(e){}return new h},p=d("localStorage"),f=d("sessionStorage"),g=new o.Yd("@firebase/database"),m=function(){let e=1;return function(){return e++}}(),_=function(e){const t=(0,s.dS)(e),n=new s.gQ;n.update(t);const i=n.digest();return s.US.encodeByteArray(i)},v=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=v.apply(null,i):t+="object"==typeof i?(0,s.Pz)(i):i,t+=" "}return t};let y=null,b=!0;const w=function(e,t){(0,s.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(g.logLevel=o.in.VERBOSE,y=g.log.bind(g),t&&f.set("logging_enabled",!0)):"function"==typeof e?y=e:(y=null,f.remove("logging_enabled"))},C=function(...e){if(!0===b&&(b=!1,null===y&&!0===f.get("logging_enabled")&&w(!0)),y){const t=v.apply(null,e);y(t)}},S=function(e){return function(...t){C(e,...t)}},E=function(...e){const t="FIREBASE INTERNAL ERROR: "+v(...e);g.error(t)},T=function(...e){const t=`FIREBASE FATAL ERROR: ${v(...e)}`;throw g.error(t),new Error(t)},I=function(...e){const t="FIREBASE WARNING: "+v(...e);g.warn(t)},k=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},A="[MIN_NAME]",N="[MAX_NAME]",x=function(e,t){if(e===t)return 0;if(e===A||t===N)return-1;if(t===A||e===N)return 1;{const n=z(e),i=z(t);return null!==n?null!==i?n-i==0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},P=function(e,t){return e===t?0:e<t?-1:1},R=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,s.Pz)(t))},D=function(e){if("object"!=typeof e||null===e)return(0,s.Pz)(e);const t=[];for(const n in e)t.push(n);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=(0,s.Pz)(t[i]),n+=":",n+=D(e[t[i]]);return n+="}",n},O=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function L(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const M=function(e){(0,s.hu)(!k(e),"Invalid JSON number");const t=1023;let n,i,r,o,a;0===e?(i=0,r=0,n=1/e==-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),i=o+t,r=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(i=0,r=Math.round(e/Math.pow(2,-1074))));const c=[];for(a=52;a;a-=1)c.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(n?1:0),c.reverse();const l=c.join("");let u="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()};const F=new RegExp("^-?(0*)\\d{1,10}$"),U=-2147483648,j=2147483647,z=function(e){if(F.test(e)){const t=Number(e);if(t>=U&&t<=j)return t}return null},H=function(e){try{e()}catch(e){setTimeout((()=>{const t=e.stack||"";throw I("Exception was thrown by user callback.",t),e}),Math.floor(0))}},V=function(e,t){const n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n};class q{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){I(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class B{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',I(e)}}class W{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}W.OWNER="owner";const $="5",K=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,G="websocket",Y="long_polling";class X{constructor(e,t,n,i,r=!1,s="",o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=p.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&p.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Q(e,t,n){let i;if((0,s.hu)("string"==typeof t,"typeof type must == string"),(0,s.hu)("object"==typeof n,"typeof params must == object"),t===G)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Y)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const r=[];return L(n,((e,t)=>{r.push(e+"="+t)})),i+r.join("&")}class J{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,s.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,s.p$)(this.counters_)}}const Z={},ee={};function te(e){const t=e.toString();return Z[t]||(Z[t]=new J),Z[t]}class ne{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&H((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const ie="start";class re{constructor(e,t,n,i,r,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S(e),this.stats_=te(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),Q(t,Y,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ne(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if((0,s.Yr)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new se(((...e)=>{const[t,n,i,r,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===ie)this.id=n,this.password=i;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={start:"t"};e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=$,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){re.forceAllow_=!0}static forceDisallow(){re.forceDisallow_=!0}static isAvailable(){return!(0,s.Yr)()&&(!!re.forceAllow_||!(re.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,s.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(0,s.h$)(t),i=O(n,1840);for(let e=0;e<i.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,s.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,s.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class se{constructor(e,t,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,s.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=m(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=se.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){n='<script>document.domain="'+document.domain+'";<\/script>'}const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){C("frame writing exception"),e.stack&&C(e.stack),C(e)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||C("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(i),n()}))}addTag(e,t){(0,s.Yr)()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{C("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}}),Math.floor(1))}}let oe=null;"undefined"!=typeof MozWebSocket?oe=MozWebSocket:"undefined"!=typeof WebSocket&&(oe=WebSocket);class ae{constructor(e,t,n,i,r,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S(this.connId),this.stats_=te(t),this.connURL=ae.connectionURL_(t,s,o,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,r){const o={};return o.v=$,!(0,s.Yr)()&&"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),i&&(o.ac=i),r&&(o.p=r),Q(e,G,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{let e;if((0,s.Yr)()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/5/${l}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production"},i=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;i&&(e.proxy={origin:i})}this.mySock=new oe(this.connURL,[],e)}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){ae.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==oe&&!ae.forceDisallow_}static previouslyFailed(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")}markConnectionHealthy(){p.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,s.cI)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,s.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,s.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=O(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ae.responsesRequiredToBeHealthy=2,ae.healthyTimeout=3e4;class ce{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[re,ae]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=ae&&ae.isAvailable();let n=t&&!ae.previouslyFailed();if(e.webSocketOnly&&(t||I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[ae];else{const e=this.transports_=[];for(const t of ce.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);ce.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ce.globalTransportInitialized_=!1;class le{constructor(e,t,n,i,r,s,o,a,c,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S("c:"+this.id+":"),this.transportManager_=new ce(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=R("t",e),n=R("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=R("t",e),n=R("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=R("t",e);if("d"in e){const n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?E("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),$!==n&&I("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),V((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ue{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class he{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,s.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let e=0;e<i.length;e++)if(i[e].callback===t&&(!n||n===i[e].context))return void i.splice(e,1)}validateEventType_(e){(0,s.hu)(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class de extends he{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,s.uI)()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new de}getInitialEvent(e){return(0,s.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class pe{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function fe(){return new pe("")}function ge(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function me(e){return e.pieces_.length-e.pieceNum_}function _e(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new pe(e.pieces_,t)}function ve(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ye(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function be(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new pe(t,0)}function we(e,t){const n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof pe)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new pe(n,0)}function Ce(e){return e.pieceNum_>=e.pieces_.length}function Se(e,t){const n=ge(e),i=ge(t);if(null===n)return t;if(n===i)return Se(_e(e),_e(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ee(e,t){if(me(e)!==me(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Te(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(me(e)>me(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class Ie{constructor(e,t){this.errorPrefix_=t,this.parts_=ye(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=(0,s.ug)(this.parts_[e]);ke(this)}}function ke(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ae(e))}function Ae(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Ne extends he{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Ne}getInitialEvent(e){return(0,s.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const xe=1e3;class Pe extends ue{constructor(e,t,n,i,r,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Pe.nextPersistentConnectionId_++,this.log_=S("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xe,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,s.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ne.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&de.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_((0,s.Pz)(r)),(0,s.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new s.BH,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,i){this.initConnection_();const r=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),(0,s.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,s.hu)(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,(r=>{const s=r.d,o=r.s;Pe.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(n,i),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&(0,s.r3)(e,"w")){const n=(0,s.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();I(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,s.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,s.w9)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),(0,s.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,(e=>{i&&setTimeout((()=>{i(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();const s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,s.Pz)(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):E("Unrecognized action received from server: "+(0,s.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,s.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xe,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=xe,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=xe),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Pe.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,n())},l=function(e){(0,s.hu)(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[s,c]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),this.authToken_=s&&s.accessToken,this.appCheckToken_=c&&c.token,a=new le(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{I(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),r))}catch(e){this.log_("Failed to get token: "+e),o||(this.repoInfo_.nodeAdmin&&I(e),c())}}}interrupt(e){C("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){C("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,s.xb)(this.interruptReasons_)&&(this.reconnectDelay_=xe,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>D(e))).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new pe(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){C("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){C("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,s.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+l.replace(/\./g,"-")]=1,(0,s.uI)()?e["framework.cordova"]=1:(0,s.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=de.getInstance().currentlyOnline();return(0,s.xb)(this.interruptReasons_)&&e}}Pe.nextPersistentConnectionId_=0,Pe.nextConnectionId_=0;class Re{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Re(e,t)}}class De{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Re(A,e),i=new Re(A,t);return 0!==this.compare(n,i)}minPost(){return Re.MIN}}let Oe;class Le extends De{static get __EMPTY_NODE(){return Oe}static set __EMPTY_NODE(e){Oe=e}compare(e,t){return x(e.name,t.name)}isDefinedOn(e){throw(0,s.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Re.MIN}maxPost(){return new Re(N,Oe)}makePost(e,t){return(0,s.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Re(e,Oe)}toString(){return".key"}}const Me=new Le;class Fe{constructor(e,t,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ue{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:Ue.RED,this.left=null!=i?i:je.EMPTY_NODE,this.right=null!=r?r:je.EMPTY_NODE}copy(e,t,n,i,r){return new Ue(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return je.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return je.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ue.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ue.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ue.RED=!0,Ue.BLACK=!1;class je{constructor(e,t=je.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new je(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ue.BLACK,null,null))}remove(e){return new je(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ue.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Fe(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Fe(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Fe(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Fe(this.root_,null,this.comparator_,!0,e)}}function ze(e,t){return x(e.name,t.name)}function He(e,t){return x(e,t)}let Ve;je.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new Ue(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const qe=function(e){return"number"==typeof e?"number:"+M(e):"string:"+e},Be=function(e){if(e.isLeafNode()){const t=e.val();(0,s.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,s.r3)(t,".sv"),"Priority must be a string or number.")}else(0,s.hu)(e===Ve||e.isEmpty(),"priority of unexpected type.");(0,s.hu)(e===Ve||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let We,$e,Ke;class Ge{constructor(e,t=Ge.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,(0,s.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Be(this.priorityNode_)}static set __childrenNodeConstructor(e){We=e}static get __childrenNodeConstructor(){return We}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ge(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Ge.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ce(e)?this:".priority"===ge(e)?this.priorityNode_:Ge.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Ge.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ge(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:((0,s.hu)(".priority"!==n||1===me(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Ge.__childrenNodeConstructor.EMPTY_NODE.updateChild(_e(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+qe(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?M(this.value_):this.value_,this.lazyHash_=_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ge.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ge.__childrenNodeConstructor?-1:((0,s.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=Ge.VALUE_TYPE_ORDER.indexOf(t),r=Ge.VALUE_TYPE_ORDER.indexOf(n);return(0,s.hu)(i>=0,"Unknown leaf type: "+t),(0,s.hu)(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Ge.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Ye=new class extends De{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?x(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Re.MIN}maxPost(){return new Re(N,new Ge("[PRIORITY-POST]",Ke))}makePost(e,t){const n=$e(e);return new Re(t,new Ge("[PRIORITY-POST]",n))}toString(){return".priority"}},Xe=Math.log(2);class Qe{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Xe,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Je=function(e,t,n,i){e.sort(t);const r=function(t,i){const s=i-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Ue(a,o.node,Ue.BLACK,null,null);{const c=parseInt(s/2,10)+t,l=r(t,c),u=r(c+1,i);return o=e[c],a=n?n(o):o,new Ue(a,o.node,Ue.BLACK,l,u)}},s=function(t){let i=null,s=null,o=e.length;const a=function(t,i){const s=o-t,a=o;o-=t;const l=r(s+1,a),u=e[s],h=n?n(u):u;c(new Ue(h,u.node,i,null,l))},c=function(e){i?(i.left=e,i=e):(s=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?a(i,Ue.BLACK):(a(i,Ue.BLACK),a(i,Ue.RED))}return s}(new Qe(e.length));return new je(i||t,s)};let Ze;const et={};class tt{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,s.hu)(et&&Ye,"ChildrenNode.ts has not been loaded"),Ze=Ze||new tt({".priority":et},{".priority":Ye}),Ze}get(e){const t=(0,s.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof je?t:null}hasIndex(e){return(0,s.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,s.hu)(e!==Me,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=t.getIterator(Re.Wrap);let o,a=r.getNext();for(;a;)i=i||e.isDefinedOn(a.node),n.push(a),a=r.getNext();o=i?Je(n,e.getCompare()):et;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=o,new tt(u,l)}addToIndexes(e,t){const n=(0,s.UI)(this.indexes_,((n,i)=>{const r=(0,s.DV)(this.indexSet_,i);if((0,s.hu)(r,"Missing index implementation for "+i),n===et){if(r.isDefinedOn(e.node)){const n=[],i=t.getIterator(Re.Wrap);let s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),Je(n,r.getCompare())}return et}{const i=t.get(e.name);let r=n;return i&&(r=r.remove(new Re(e.name,i))),r.insert(e,e.node)}}));return new tt(n,this.indexSet_)}removeFromIndexes(e,t){const n=(0,s.UI)(this.indexes_,(n=>{if(n===et)return n;{const i=t.get(e.name);return i?n.remove(new Re(e.name,i)):n}}));return new tt(n,this.indexSet_)}}let nt;class it{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Be(this.priorityNode_),this.children_.isEmpty()&&(0,s.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return nt||(nt=new it(new je(He),null,tt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||nt}updatePriority(e){return this.children_.isEmpty()?this:new it(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?nt:t}}getChild(e){const t=ge(e);return null===t?this:this.getImmediateChild(t).getChild(_e(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if((0,s.hu)(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Re(e,t);let i,r;t.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?nt:this.priorityNode_;return new it(i,s,r)}}updateChild(e,t){const n=ge(e);if(null===n)return t;{(0,s.hu)(".priority"!==ge(e)||1===me(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(_e(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,r=!0;if(this.forEachChild(Ye,((s,o)=>{t[s]=o.val(e),n++,r&&it.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1})),!e&&r&&i<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+qe(this.getPriority().val())+":"),this.forEachChild(Ye,((t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)})),this.lazyHash_=""===e?"":_(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new Re(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Re(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Re(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Re.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Re.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rt?-1:0}withIndex(e){if(e===Me||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new it(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Me||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Ye),n=t.getIterator(Ye);let i=e.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=e.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(e){return e===Me?null:this.indexMap_.get(e.toString())}}it.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const rt=new class extends it{constructor(){super(new je(He),it.EMPTY_NODE,tt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return it.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Re,{MIN:{value:new Re(A,it.EMPTY_NODE)},MAX:{value:new Re(N,rt)}}),Le.__EMPTY_NODE=it.EMPTY_NODE,Ge.__childrenNodeConstructor=it,Ve=rt,function(e){Ke=e}(rt);function st(e,t=null){if(null===e)return it.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,s.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e){return new Ge(e,st(t))}if(e instanceof Array){let n=it.EMPTY_NODE;return L(e,((t,i)=>{if((0,s.r3)(e,t)&&"."!==t.substring(0,1)){const e=st(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(st(t))}{const n=[];let i=!1;if(L(e,((e,t)=>{if("."!==e.substring(0,1)){const r=st(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new Re(e,r)))}})),0===n.length)return it.EMPTY_NODE;const r=Je(n,ze,(e=>e.name),He);if(i){const e=Je(n,Ye.getCompare());return new it(r,st(t),new tt({".priority":e},{".priority":Ye}))}return new it(r,st(t),tt.Default)}}!function(e){$e=e}(st);class ot extends De{constructor(e){super(),this.indexPath_=e,(0,s.hu)(!Ce(e)&&".priority"!==ge(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?x(e.name,t.name):r}makePost(e,t){const n=st(e),i=it.EMPTY_NODE.updateChild(this.indexPath_,n);return new Re(t,i)}maxPost(){const e=it.EMPTY_NODE.updateChild(this.indexPath_,rt);return new Re(N,e)}toString(){return ye(this.indexPath_,0).join("/")}}const at=new class extends De{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?x(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Re.MIN}maxPost(){return Re.MAX}makePost(e,t){const n=st(e);return new Re(t,n)}toString(){return".value"}},ct="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();function lt(e){return{type:"value",snapshotNode:e}}function ut(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ht(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function dt(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class pt{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ye}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,s.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,s.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:A}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,s.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,s.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:N}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,s.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ye}copy(){const e=new pt;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ft(e){const t={};if(e.isDefault())return t;let n;return e.index_===Ye?n="$priority":e.index_===at?n="$value":e.index_===Me?n="$key":((0,s.hu)(e.index_ instanceof ot,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=(0,s.Pz)(n),e.startSet_&&(t.startAt=(0,s.Pz)(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+(0,s.Pz)(e.indexStartName_))),e.endSet_&&(t.endAt=(0,s.Pz)(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+(0,s.Pz)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function gt(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Ye&&(t.i=e.index_.toString()),t}class mt extends ue{constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=S("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,s.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=mt.getListenId_(e,n),a={};this.listens_[o]=a;const c=ft(e._queryParams);this.restRequest_(r+".json",c,((e,t)=>{let c=t;if(404===e&&(c=null,e=null),null===e&&this.onDataUpdate_(r,c,!1,n),(0,s.DV)(this.listens_,o)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}}))}unlisten(e,t){const n=mt.getListenId_(e,t);delete this.listens_[n]}get(e){const t=ft(e._queryParams),n=e._path.toString(),i=new s.BH;return this.restRequest_(n+".json",t,((e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))})),i.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([i,r])=>{i&&i.accessToken&&(t.auth=i.accessToken),r&&r.token&&(t.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,s.xO)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=(0,s.cI)(a.responseText)}catch(e){I("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&I("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class _t{constructor(){this.rootNode_=it.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function vt(){return{value:null,children:new Map}}function yt(e,t,n){if(Ce(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=ge(t);e.children.has(i)||e.children.set(i,vt());yt(e.children.get(i),t=_e(t),n)}}function bt(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,i)=>{bt(i,new pe(t.toString()+"/"+e),n)}))}class wt{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&L(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Ct{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new wt(e);const n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;L(e,((e,i)=>{i>0&&(0,s.r3)(this.statsToReport_,e)&&(t[e]=i,n=!0)})),n&&this.server_.reportStats(t),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var St;function Et(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(St||(St={}));class Tt{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=St.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ce(this.path)){if(null!=this.affectedTree.value)return(0,s.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new pe(e));return new Tt(fe(),t,this.revert)}}return(0,s.hu)(ge(this.path)===e,"operationForChild called for unrelated child."),new Tt(_e(this.path),this.affectedTree,this.revert)}}class It{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=St.OVERWRITE}operationForChild(e){return Ce(this.path)?new It(this.source,fe(),this.snap.getImmediateChild(e)):new It(this.source,_e(this.path),this.snap)}}class kt{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=St.MERGE}operationForChild(e){if(Ce(this.path)){const t=this.children.subtree(new pe(e));return t.isEmpty()?null:t.value?new It(this.source,fe(),t.value):new kt(this.source,fe(),t)}return(0,s.hu)(ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new kt(this.source,_e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class At{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ce(e))return this.isFullyInitialized()&&!this.filtered_;const t=ge(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Nt(e,t,n,i,r,o){const a=i.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw(0,s.g5)("Should only compare child_ events.");const i=new Re(t.childName,t.snapshotNode),r=new Re(n.childName,n.snapshotNode);return e.index_.compare(i,r)}(e,t,n))),a.forEach((n=>{const i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);r.forEach((r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))}))}))}function xt(e,t){return{eventCache:e,serverCache:t}}function Pt(e,t,n,i){return xt(new At(t,n,i),e.serverCache)}function Rt(e,t,n,i){return xt(e.eventCache,new At(t,n,i))}function Dt(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ot(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Lt;class Mt{constructor(e,t=(()=>(Lt||(Lt=new je(P)),Lt))()){this.value=e,this.children=t}static fromObject(e){let t=new Mt(null);return L(e,((e,n)=>{t=t.set(new pe(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:fe(),value:this.value};if(Ce(e))return null;{const n=ge(e),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(_e(e),t);if(null!=r){return{path:we(new pe(n),r.path),value:r.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Ce(e))return this;{const t=ge(e),n=this.children.get(t);return null!==n?n.subtree(_e(e)):new Mt(null)}}set(e,t){if(Ce(e))return new Mt(t,this.children);{const n=ge(e),i=(this.children.get(n)||new Mt(null)).set(_e(e),t),r=this.children.insert(n,i);return new Mt(this.value,r)}}remove(e){if(Ce(e))return this.children.isEmpty()?new Mt(null):new Mt(null,this.children);{const t=ge(e),n=this.children.get(t);if(n){const i=n.remove(_e(e));let r;return r=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&r.isEmpty()?new Mt(null):new Mt(this.value,r)}return this}}get(e){if(Ce(e))return this.value;{const t=ge(e),n=this.children.get(t);return n?n.get(_e(e)):null}}setTree(e,t){if(Ce(e))return t;{const n=ge(e),i=(this.children.get(n)||new Mt(null)).setTree(_e(e),t);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new Mt(this.value,r)}}fold(e){return this.fold_(fe(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((i,r)=>{n[i]=r.fold_(we(e,i),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,fe(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(Ce(e))return null;{const i=ge(e),r=this.children.get(i);return r?r.findOnPath_(_e(e),we(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,fe(),t)}foreachOnPath_(e,t,n){if(Ce(e))return this;{this.value&&n(t,this.value);const i=ge(e),r=this.children.get(i);return r?r.foreachOnPath_(_e(e),we(t,i),n):new Mt(null)}}foreach(e){this.foreach_(fe(),e)}foreach_(e,t){this.children.inorderTraversal(((n,i)=>{i.foreach_(we(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Ft{constructor(e){this.writeTree_=e}static empty(){return new Ft(new Mt(null))}}function Ut(e,t,n){if(Ce(t))return new Ft(new Mt(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const o=Se(r,t);return s=s.updateChild(o,n),new Ft(e.writeTree_.set(r,s))}{const i=new Mt(n),r=e.writeTree_.setTree(t,i);return new Ft(r)}}}function jt(e,t,n){let i=e;return L(n,((e,n)=>{i=Ut(i,we(t,e),n)})),i}function zt(e,t){if(Ce(t))return Ft.empty();{const n=e.writeTree_.setTree(t,new Mt(null));return new Ft(n)}}function Ht(e,t){return null!=Vt(e,t)}function Vt(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Se(n.path,t)):null}function qt(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ye,((e,n)=>{t.push(new Re(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Re(e,n.value))})),t}function Bt(e,t){if(Ce(t))return e;{const n=Vt(e,t);return new Ft(null!=n?new Mt(n):e.writeTree_.subtree(t))}}function Wt(e){return e.writeTree_.isEmpty()}function $t(e,t){return Kt(fe(),e.writeTree_,t)}function Kt(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal(((t,r)=>{".priority"===t?((0,s.hu)(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=Kt(we(e,t),r,n)})),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(we(e,".priority"),i)),n}}function Gt(e,t){return cn(t,e)}function Yt(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));(0,s.hu)(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,o=!1,a=e.allWrites.length-1;for(;r&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&Xt(t,i.path)?r=!1:Te(i.path,t.path)&&(o=!0)),a--}if(r){if(o)return function(e){e.visibleWrites=Jt(e.allWrites,Qt,fe()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(i.snap)e.visibleWrites=zt(e.visibleWrites,i.path);else{L(i.children,(t=>{e.visibleWrites=zt(e.visibleWrites,we(i.path,t))}))}return!0}return!1}function Xt(e,t){if(e.snap)return Te(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Te(we(e.path,n),t))return!0;return!1}function Qt(e){return e.visible}function Jt(e,t,n){let i=Ft.empty();for(let r=0;r<e.length;++r){const o=e[r];if(t(o)){const e=o.path;let t;if(o.snap)Te(n,e)?(t=Se(n,e),i=Ut(i,t,o.snap)):Te(e,n)&&(t=Se(e,n),i=Ut(i,fe(),o.snap.getChild(t)));else{if(!o.children)throw(0,s.g5)("WriteRecord should have .snap or .children");if(Te(n,e))t=Se(n,e),i=jt(i,t,o.children);else if(Te(e,n))if(t=Se(e,n),Ce(t))i=jt(i,fe(),o.children);else{const e=(0,s.DV)(o.children,ge(t));if(e){const n=e.getChild(_e(t));i=Ut(i,fe(),n)}}}}}return i}function Zt(e,t,n,i,r){if(i||r){const s=Bt(e.visibleWrites,t);if(!r&&Wt(s))return n;if(r||null!=n||Ht(s,fe())){const s=function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(Te(e.path,t)||Te(t,e.path))};return $t(Jt(e.allWrites,s,t),n||it.EMPTY_NODE)}return null}{const i=Vt(e.visibleWrites,t);if(null!=i)return i;{const i=Bt(e.visibleWrites,t);if(Wt(i))return n;if(null!=n||Ht(i,fe())){return $t(i,n||it.EMPTY_NODE)}return null}}}function en(e,t,n,i){return Zt(e.writeTree,e.treePath,t,n,i)}function tn(e,t){return function(e,t,n){let i=it.EMPTY_NODE;const r=Vt(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Ye,((e,t)=>{i=i.updateImmediateChild(e,t)})),i;if(n){const r=Bt(e.visibleWrites,t);return n.forEachChild(Ye,((e,t)=>{const n=$t(Bt(r,new pe(e)),t);i=i.updateImmediateChild(e,n)})),qt(r).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}return qt(Bt(e.visibleWrites,t)).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}(e.writeTree,e.treePath,t)}function nn(e,t,n,i){return function(e,t,n,i,r){(0,s.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=we(t,n);if(Ht(e.visibleWrites,o))return null;{const t=Bt(e.visibleWrites,o);return Wt(t)?r.getChild(n):$t(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function rn(e,t){return function(e,t){return Vt(e.visibleWrites,t)}(e.writeTree,we(e.treePath,t))}function sn(e,t,n,i,r,s){return function(e,t,n,i,r,s,o){let a;const c=Bt(e.visibleWrites,t),l=Vt(c,fe());if(null!=l)a=l;else{if(null==n)return[];a=$t(c,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let c=n.getNext();for(;c&&e.length<r;)0!==t(c,i)&&e.push(c),c=n.getNext();return e}}(e.writeTree,e.treePath,t,n,i,r,s)}function on(e,t,n){return function(e,t,n,i){const r=we(t,n),s=Vt(e.visibleWrites,r);if(null!=s)return s;if(i.isCompleteForChild(n))return $t(Bt(e.visibleWrites,r),i.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function an(e,t){return cn(we(e.treePath,t),e.writeTree)}function cn(e,t){return{treePath:e,writeTree:t}}class ln{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;(0,s.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,s.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,dt(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,ht(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,ut(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw(0,s.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,dt(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const un=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class hn{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new At(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return on(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ot(this.viewCache_),r=sn(this.writes_,i,t,1,n,e);return 0===r.length?null:r[0]}}function dn(e,t,n,i,r){const o=new ln;let a,c;if(n.type===St.OVERWRITE){const l=n;l.source.fromUser?a=gn(e,t,l.path,l.snap,i,r,o):((0,s.hu)(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.serverCache.isFiltered()&&!Ce(l.path),a=fn(e,t,l.path,l.snap,i,r,c,o))}else if(n.type===St.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,i,r,s,o){let a=t;return i.foreach(((i,c)=>{const l=we(n,i);mn(t,ge(l))&&(a=gn(e,a,l,c,r,s,o))})),i.foreach(((i,c)=>{const l=we(n,i);mn(t,ge(l))||(a=gn(e,a,l,c,r,s,o))})),a}(e,t,l.path,l.children,i,r,o):((0,s.hu)(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.serverCache.isFiltered(),a=vn(e,t,l.path,l.children,i,r,c,o))}else if(n.type===St.ACK_USER_WRITE){const c=n;a=c.revert?function(e,t,n,i,r,o){let a;if(null!=rn(i,n))return t;{const c=new hn(i,t,r),l=t.eventCache.getNode();let u;if(Ce(n)||".priority"===ge(n)){let n;if(t.serverCache.isFullyInitialized())n=en(i,Ot(t));else{const e=t.serverCache.getNode();(0,s.hu)(e instanceof it,"serverChildren would be complete if leaf node"),n=tn(i,e)}u=e.filter.updateFullNode(l,n,o)}else{const r=ge(n);let s=on(i,r,t.serverCache);null==s&&t.serverCache.isCompleteForChild(r)&&(s=l.getImmediateChild(r)),u=null!=s?e.filter.updateChild(l,r,s,_e(n),c,o):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(l,r,it.EMPTY_NODE,_e(n),c,o):l,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=en(i,Ot(t)),a.isLeafNode()&&(u=e.filter.updateFullNode(u,a,o)))}return a=t.serverCache.isFullyInitialized()||null!=rn(i,fe()),Pt(t,u,a,e.filter.filtersNodes())}}(e,t,c.path,i,r,o):function(e,t,n,i,r,s,o){if(null!=rn(r,n))return t;const a=t.serverCache.isFiltered(),c=t.serverCache;if(null!=i.value){if(Ce(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return fn(e,t,n,c.getNode().getChild(n),r,s,a,o);if(Ce(n)){let i=new Mt(null);return c.getNode().forEachChild(Me,((e,t)=>{i=i.set(new pe(e),t)})),vn(e,t,n,i,r,s,a,o)}return t}{let l=new Mt(null);return i.foreach(((e,t)=>{const i=we(n,e);c.isCompleteForPath(i)&&(l=l.set(e,c.getNode().getChild(i)))})),vn(e,t,n,l,r,s,a,o)}}(e,t,c.path,c.affectedTree,i,r,o)}else{if(n.type!==St.LISTEN_COMPLETE)throw(0,s.g5)("Unknown operation type: "+n.type);a=function(e,t,n,i,r){const s=t.serverCache,o=Rt(t,s.getNode(),s.isFullyInitialized()||Ce(n),s.isFiltered());return pn(e,o,n,i,un,r)}(e,t,n.path,i,o)}const l=o.getChanges();return function(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Dt(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(lt(Dt(t)))}}(t,a,l),{viewCache:a,changes:l}}function pn(e,t,n,i,r,o){const a=t.eventCache;if(null!=rn(i,n))return t;{let c,l;if(Ce(n))if((0,s.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Ot(t),r=tn(i,n instanceof it?n:it.EMPTY_NODE);c=e.filter.updateFullNode(t.eventCache.getNode(),r,o)}else{const n=en(i,Ot(t));c=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const u=ge(n);if(".priority"===u){(0,s.hu)(1===me(n),"Can't have a priority with additional path components");const r=a.getNode();l=t.serverCache.getNode();const o=nn(i,n,r,l);c=null!=o?e.filter.updatePriority(r,o):a.getNode()}else{const s=_e(n);let h;if(a.isCompleteForChild(u)){l=t.serverCache.getNode();const e=nn(i,n,a.getNode(),l);h=null!=e?a.getNode().getImmediateChild(u).updateChild(s,e):a.getNode().getImmediateChild(u)}else h=on(i,u,t.serverCache);c=null!=h?e.filter.updateChild(a.getNode(),u,h,s,r,o):a.getNode()}}return Pt(t,c,a.isFullyInitialized()||Ce(n),e.filter.filtersNodes())}}function fn(e,t,n,i,r,s,o,a){const c=t.serverCache;let l;const u=o?e.filter:e.filter.getIndexedFilter();if(Ce(n))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){const e=c.getNode().updateChild(n,i);l=u.updateFullNode(c.getNode(),e,null)}else{const e=ge(n);if(!c.isCompleteForPath(n)&&me(n)>1)return t;const r=_e(n),s=c.getNode().getImmediateChild(e).updateChild(r,i);l=".priority"===e?u.updatePriority(c.getNode(),s):u.updateChild(c.getNode(),e,s,r,un,null)}const h=Rt(t,l,c.isFullyInitialized()||Ce(n),u.filtersNodes());return pn(e,h,n,r,new hn(r,h,s),a)}function gn(e,t,n,i,r,s,o){const a=t.eventCache;let c,l;const u=new hn(r,t,s);if(Ce(n))l=e.filter.updateFullNode(t.eventCache.getNode(),i,o),c=Pt(t,l,!0,e.filter.filtersNodes());else{const r=ge(n);if(".priority"===r)l=e.filter.updatePriority(t.eventCache.getNode(),i),c=Pt(t,l,a.isFullyInitialized(),a.isFiltered());else{const s=_e(n),l=a.getNode().getImmediateChild(r);let h;if(Ce(s))h=i;else{const e=u.getCompleteChild(r);h=null!=e?".priority"===ve(s)&&e.getChild(be(s)).isEmpty()?e:e.updateChild(s,i):it.EMPTY_NODE}if(l.equals(h))c=t;else{c=Pt(t,e.filter.updateChild(a.getNode(),r,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function mn(e,t){return e.eventCache.isCompleteForChild(t)}function _n(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function vn(e,t,n,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c,l=t;c=Ce(n)?i:new Mt(null).setTree(n,i);const u=t.serverCache.getNode();return c.children.inorderTraversal(((n,i)=>{if(u.hasChild(n)){const c=_n(0,t.serverCache.getNode().getImmediateChild(n),i);l=fn(e,l,new pe(n),c,r,s,o,a)}})),c.children.inorderTraversal(((n,i)=>{const c=!t.serverCache.isCompleteForChild(n)&&void 0===i.value;if(!u.hasChild(n)&&!c){const c=_n(0,t.serverCache.getNode().getImmediateChild(n),i);l=fn(e,l,new pe(n),c,r,s,o,a)}})),l}function yn(e,t){const n=Ot(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Ce(t)&&!n.getImmediateChild(ge(t)).isEmpty())?n.getChild(t):null}function bn(e,t,n,i){t.type===St.MERGE&&null!==t.source.queryId&&((0,s.hu)(Ot(e.viewCache_),"We should always have a full cache before handling merges"),(0,s.hu)(Dt(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,o=dn(e.processor_,r,t,n,i);var a,c;return a=e.processor_,c=o.viewCache,(0,s.hu)(c.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),(0,s.hu)(c.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),(0,s.hu)(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,wn(e,o.changes,o.viewCache.eventCache.getNode(),null)}function wn(e,t,n,i){const r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){const r=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Nt(e,r,"child_removed",t,i,n),Nt(e,r,"child_added",t,i,n),Nt(e,r,"child_moved",s,i,n),Nt(e,r,"child_changed",t,i,n),Nt(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}let Cn,Sn;function En(e,t,n,i){const r=t.source.queryId;if(null!==r){const o=e.views.get(r);return(0,s.hu)(null!=o,"SyncTree gave us an op for an invalid query."),bn(o,t,n,i)}{let r=[];for(const s of e.views.values())r=r.concat(bn(s,t,n,i));return r}}function Tn(e,t){let n=null;for(const i of e.views.values())n=n||yn(i,t);return n}class In{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mt(null),this.pendingWriteTree_={visibleWrites:Ft.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kn(e,t,n,i,r){return function(e,t,n,i,r){(0,s.hu)(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=Ut(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,r),r?Rn(e,new It({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function An(e,t,n=!1){const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(Yt(e.pendingWriteTree_,t)){let t=new Mt(null);return null!=i.snap?t=t.set(fe(),!0):L(i.children,(e=>{t=t.set(new pe(e),!0)})),Rn(e,new Tt(i.path,t,n))}return[]}function Nn(e,t,n){return Rn(e,new It({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function xn(e,t,n,i){const r=Ln(e,i);if(null!=r){const i=Mn(r),s=i.path,o=i.queryId,a=Se(s,t);return Fn(e,s,new It(Et(o),a,n))}return[]}function Pn(e,t,n){const i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,((e,n)=>{const i=Tn(n,Se(e,t));if(i)return i}));return Zt(i,t,r,n,!0)}function Rn(e,t){return Dn(t,e.syncPointTree_,null,Gt(e.pendingWriteTree_,fe()))}function Dn(e,t,n,i){if(Ce(e.path))return On(e,t,n,i);{const r=t.get(fe());null==n&&null!=r&&(n=Tn(r,fe()));let s=[];const o=ge(e.path),a=e.operationForChild(o),c=t.children.get(o);if(c&&a){const e=n?n.getImmediateChild(o):null,t=an(i,o);s=s.concat(Dn(a,c,e,t))}return r&&(s=s.concat(En(r,e,i,n))),s}}function On(e,t,n,i){const r=t.get(fe());null==n&&null!=r&&(n=Tn(r,fe()));let s=[];return t.children.inorderTraversal(((t,r)=>{const o=n?n.getImmediateChild(t):null,a=an(i,t),c=e.operationForChild(t);c&&(s=s.concat(On(c,r,o,a)))})),r&&(s=s.concat(En(r,e,i,n))),s}function Ln(e,t){return e.tagToQueryMap.get(t)}function Mn(e){const t=e.indexOf("$");return(0,s.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new pe(e.substr(0,t))}}function Fn(e,t,n){const i=e.syncPointTree_.get(t);(0,s.hu)(i,"Missing sync point for query tag that we're tracking");return En(i,n,Gt(e.pendingWriteTree_,t),null)}class Un{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Un(t)}node(){return this.node_}}class jn{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=we(this.path_,e);return new jn(this.syncTree_,t)}node(){return Pn(this.syncTree_,this.path_)}}const zn=function(e,t,n){return e&&"object"==typeof e?((0,s.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Hn(e[".sv"],t,n):"object"==typeof e[".sv"]?Vn(e[".sv"],t):void(0,s.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Hn=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,s.hu)(!1,"Unexpected server value: "+e)},Vn=function(e,t,n){e.hasOwnProperty("increment")||(0,s.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!=typeof i&&(0,s.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,s.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return"number"!=typeof o?i:o+i},qn=function(e,t,n,i){return Wn(t,new jn(n,e),i)},Bn=function(e,t,n){return Wn(e,new Un(t),n)};function Wn(e,t,n){const i=e.getPriority().val(),r=zn(i,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const i=e,s=zn(i.getValue(),t,n);return s!==i.getValue()||r!==i.getPriority().val()?new Ge(s,st(r)):e}{const i=e;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new Ge(r))),i.forEachChild(Ye,((e,i)=>{const r=Wn(i,t.getImmediateChild(e),n);r!==i&&(s=s.updateImmediateChild(e,r))})),s}}class $n{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function Kn(e,t){let n=t instanceof pe?t:new pe(t),i=e,r=ge(n);for(;null!==r;){const e=(0,s.DV)(i.node.children,r)||{children:{},childCount:0};i=new $n(r,i,e),n=_e(n),r=ge(n)}return i}function Gn(e){return e.node.value}function Yn(e,t){e.node.value=t,ei(e)}function Xn(e){return e.node.childCount>0}function Qn(e,t){L(e.node.children,((n,i)=>{t(new $n(n,e,i))}))}function Jn(e,t,n,i){n&&!i&&t(e),Qn(e,(e=>{Jn(e,t,!0,i)})),n&&i&&t(e)}function Zn(e){return new pe(null===e.parent?e.name:Zn(e.parent)+"/"+e.name)}function ei(e){null!==e.parent&&function(e,t,n){const i=function(e){return void 0===Gn(e)&&!Xn(e)}(n),r=(0,s.r3)(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,ei(e)):i||r||(e.node.children[t]=n.node,e.node.childCount++,ei(e))}(e.parent,e.name,e)}const ti=/[\[\].#$\/\u0000-\u001F\u007F]/,ni=/[\[\].#$\u0000-\u001F\u007F]/,ii=10485760,ri=function(e){return"string"==typeof e&&0!==e.length&&!ti.test(e)},si=function(e){return"string"==typeof e&&0!==e.length&&!ni.test(e)},oi=function(e,t,n,i){i&&void 0===t||ai((0,s.gK)(e,"value"),t,n)},ai=function(e,t,n){const i=n instanceof pe?new Ie(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Ae(i));if("function"==typeof t)throw new Error(e+"contains a function "+Ae(i)+" with contents = "+t.toString());if(k(t))throw new Error(e+"contains "+t.toString()+" "+Ae(i));if("string"==typeof t&&t.length>ii/3&&(0,s.ug)(t)>ii)throw new Error(e+"contains a string greater than "+"10485760 utf8 bytes "+Ae(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,r=!1;if(L(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!ri(t)))throw new Error(e+" contains an invalid key ("+t+") "+Ae(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,s.ug)(t),ke(e)}(i,t),ai(e,o,i),function(e){const t=e.parts_.pop();e.byteLength_-=(0,s.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),n&&r)throw new Error(e+' contains ".value" child '+Ae(i)+" in addition to actual children.")}},ci=function(e,t,n,i){if(!(i&&void 0===n||si(n)))throw new Error((0,s.gK)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},li=function(e,t){if(".info"===ge(t))throw new Error(e+" failed = Can't modify data under /.info/")},ui=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!ri(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),si(e)}(n))throw new Error((0,s.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class hi{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function di(e,t){let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null===n||Ee(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function pi(e,t,n){di(e,n),fi(e,(e=>Te(e,t)||Te(t,e)))}function fi(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];if(r){t(r.path)?(gi(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function gi(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();y&&C("event: "+n.toString()),H(i)}}}const mi="repo_interrupt";class _i{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hi,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vt(),this.transactionQueueTree_=new $n,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vi(e,t,n){if(e.stats_=te(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new mt(e.repoInfo_,((t,n,i,r)=>{wi(e,t,n,i,r)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Ci(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,s.Pz)(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new Pe(e.repoInfo_,t,((t,n,i,r)=>{wi(e,t,n,i,r)}),(t=>{Ci(e,t)}),(t=>{!function(e,t){L(t,((t,n)=>{Si(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return ee[n]||(ee[n]=t()),ee[n]}(e.repoInfo_,(()=>new Ct(e.stats_,e.server_))),e.infoData_=new _t,e.infoSyncTree_=new In({startListening:(t,n,i,r)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=Nn(e.infoSyncTree_,t._path,o),setTimeout((()=>{r("ok")}),0)),s},stopListening:()=>{}}),Si(e,"connected",!1),e.serverSyncTree_=new In({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,((n,i)=>{const s=r(n,i);pi(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function yi(e){const t=e.infoData_.getNode(new pe(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function bi(e){return(t=(t={timestamp:yi(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function wi(e,t,n,i,r){e.dataUpdateCount++;const o=new pe(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(r)if(i){const t=(0,s.UI)(n,(e=>st(e)));a=function(e,t,n,i){const r=Ln(e,i);if(r){const i=Mn(r),s=i.path,o=i.queryId,a=Se(s,t),c=Mt.fromObject(n);return Fn(e,s,new kt(Et(o),a,c))}return[]}(e.serverSyncTree_,o,t,r)}else{const t=st(n);a=xn(e.serverSyncTree_,o,t,r)}else if(i){const t=(0,s.UI)(n,(e=>st(e)));a=function(e,t,n){const i=Mt.fromObject(n);return Rn(e,new kt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,o,t)}else{const t=st(n);a=Nn(e.serverSyncTree_,o,t)}let c=o;a.length>0&&(c=Pi(e,o)),pi(e.eventQueue_,c,a)}function Ci(e,t){Si(e,"connected",t),!1===t&&function(e){ki(e,"onDisconnectEvents");const t=bi(e),n=vt();bt(e.onDisconnect_,fe(),((i,r)=>{const s=qn(i,r,e.serverSyncTree_,t);yt(n,i,s)}));let i=[];bt(n,fe(),((t,n)=>{i=i.concat(Nn(e.serverSyncTree_,t,n));const r=Mi(e,t);Pi(e,r)})),e.onDisconnect_=vt(),pi(e.eventQueue_,fe(),i)}(e)}function Si(e,t,n){const i=new pe("/.info/"+t),r=st(n);e.infoData_.updateSnapshot(i,r);const s=Nn(e.infoSyncTree_,i,r);pi(e.eventQueue_,i,s)}function Ei(e){return e.nextWriteId_++}function Ti(e,t,n,i,r){ki(e,"set",{path:t.toString(),value:n,priority:i});const s=bi(e),o=st(n,i),a=Pn(e.serverSyncTree_,t),c=Bn(o,a,s),l=Ei(e),u=kn(e.serverSyncTree_,t,c,l,!0);di(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,i)=>{const s="ok"===n;s||I("set at "+t+" failed: "+n);const o=An(e.serverSyncTree_,l,!s);pi(e.eventQueue_,t,o),Ai(e,r,n,i)}));const h=Mi(e,t);Pi(e,h),pi(e.eventQueue_,h,[])}function Ii(e){e.persistentConnection_&&e.persistentConnection_.interrupt(mi)}function ki(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),C(n,...t)}function Ai(e,t,n,i){t&&H((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let r=e;i&&(r+=": "+i);const s=new Error(r);s.code=e,t(s)}}))}function Ni(e,t,n){return Pn(e.serverSyncTree_,t,n)||it.EMPTY_NODE}function xi(e,t=e.transactionQueueTree_){if(t||Li(e,t),Gn(t)){const n=Di(e,t);(0,s.hu)(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const i=n.map((e=>e.currentWriteId)),r=Ni(e,t,i);let o=r;const a=r.hash();for(let e=0;e<n.length;e++){const i=n[e];(0,s.hu)(0===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=1,i.retryCount++;const r=Se(t,i.path);o=o.updateChild(r,i.currentOutputSnapshotRaw)}const c=o.val(!0),l=t;e.server_.put(l.toString(),c,(i=>{ki(e,"transaction put response",{path:l.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(An(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();Li(e,Kn(e.transactionQueueTree_,t)),xi(e,e.transactionQueueTree_),pi(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)H(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{I("transaction at "+l.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}Pi(e,t)}}),a)}(e,Zn(t),n)}else Xn(t)&&Qn(t,(t=>{xi(e,t)}))}function Pi(e,t){const n=Ri(e,t),i=Zn(n);return function(e,t,n){if(0===t.length)return;const i=[];let r=[];const o=t.filter((e=>0===e.status)).map((e=>e.currentWriteId));for(let c=0;c<t.length;c++){const l=t[c],u=Se(n,l.path);let h,d=!1;if((0,s.hu)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)d=!0,h=l.abortReason,r=r.concat(An(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)d=!0,h="maxretry",r=r.concat(An(e.serverSyncTree_,l.currentWriteId,!0));else{const n=Ni(e,l.path,o);l.currentInputSnapshot=n;const i=t[c].update(n.val());if(void 0!==i){ai("transaction failed: Data returned ",i,l.path);let t=st(i);"object"==typeof i&&null!=i&&(0,s.r3)(i,".priority")||(t=t.updatePriority(n.getPriority()));const a=l.currentWriteId,c=bi(e),u=Bn(t,n,c);l.currentOutputSnapshotRaw=t,l.currentOutputSnapshotResolved=u,l.currentWriteId=Ei(e),o.splice(o.indexOf(a),1),r=r.concat(kn(e.serverSyncTree_,l.path,u,l.currentWriteId,l.applyLocally)),r=r.concat(An(e.serverSyncTree_,a,!0))}else d=!0,h="nodata",r=r.concat(An(e.serverSyncTree_,l.currentWriteId,!0))}pi(e.eventQueue_,n,r),r=[],d&&(t[c].status=2,a=t[c].unwatcher,setTimeout(a,Math.floor(0)),t[c].onComplete&&("nodata"===h?i.push((()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot))):i.push((()=>t[c].onComplete(new Error(h),!1,null)))))}var a;Li(e,e.transactionQueueTree_);for(let e=0;e<i.length;e++)H(i[e]);xi(e,e.transactionQueueTree_)}(e,Di(e,n),i),i}function Ri(e,t){let n,i=e.transactionQueueTree_;for(n=ge(t);null!==n&&void 0===Gn(i);)i=Kn(i,n),n=ge(t=_e(t));return i}function Di(e,t){const n=[];return Oi(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function Oi(e,t,n){const i=Gn(t);if(i)for(let e=0;e<i.length;e++)n.push(i[e]);Qn(t,(t=>{Oi(e,t,n)}))}function Li(e,t){const n=Gn(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Yn(t,n.length>0?n:void 0)}Qn(t,(t=>{Li(e,t)}))}function Mi(e,t){const n=Zn(Ri(e,t)),i=Kn(e.transactionQueueTree_,t);return function(e,t,n){let i=n?e:e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,(t=>{Fi(e,t)})),Fi(e,i),Jn(i,(t=>{Fi(e,t)})),n}function Fi(e,t){const n=Gn(t);if(n){const i=[];let r=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,s.hu)(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):((0,s.hu)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(An(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Yn(t,void 0):n.length=o+1,pi(e.eventQueue_,Zn(t),r);for(let e=0;e<i.length;e++)H(i[e])}}const Ui=function(e,t){const n=ji(e),i=n.namespace;"firebase.com"===n.domain&&T(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new X(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new pe(n.pathString)}},ji=function(e){let t="",n="",i="",r="",s="",o=!0,a="https",c=443;if("string"==typeof e){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(r=function(e){let t="";const n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let i=n[e];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):I(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));l=t.indexOf(":"),l>=0?(o="https"===a||"wss"===a,c=parseInt(t.substring(l+1),10)):l=t.length;const p=t.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in d&&(s=d.ns)}return{host:t,port:c,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};class zi{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return Ce(this._path)?null:ve(this._path)}get ref(){return new Hi(this._repo,this._path)}get _queryIdentifier(){const e=gt(this._queryParams),t=D(e);return"{}"===t?"default":t}get _queryObject(){return gt(this._queryParams)}isEqual(e){if(!((e=(0,s.m9)(e))instanceof zi))return!1;const t=this._repo===e._repo,n=Ee(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Hi extends zi{constructor(e,t){super(e,t,new pt,!1)}get parent(){const e=be(this._path);return null===e?null:new Hi(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}function Vi(e,t){return(e=(0,s.m9)(e))._checkNotDeleted("ref"),void 0!==t?qi(e._root,t):e._root}function qi(e,t){var n,i,r,o;return null===ge((e=(0,s.m9)(e))._path)?(n="child",i="path",o=!1,(r=t)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),ci(n,i,r,o)):ci("child","path",t,!1),new Hi(e._repo,we(e._path,t))}function Bi(e){return li("remove",e._path),Wi(e,null)}function Wi(e,t){e=(0,s.m9)(e),li("set",e._path),oi("set",t,e._path,!1);const n=new s.BH;return Ti(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}!function(e){(0,s.hu)(!Cn,"__referenceConstructor has already been defined"),Cn=e}(Hi),function(e){(0,s.hu)(!Sn,"__referenceConstructor has already been defined"),Sn=e}(Hi);const $i={};let Ki=!1;function Gi(e,t,n,i,r){let s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||T("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,c=Ui(s,r),l=c.repoInfo;"undefined"!=typeof process&&(a={NODE_ENV:"production"}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${l.namespace}`,c=Ui(s,r),l=c.repoInfo):o=!c.repoInfo.secure;const u=r&&o?new W(W.OWNER):new B(e.name,e.options,t);ui("Invalid Firebase Database URL",c),Ce(c.path)||T("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,i){let r=$i[t.name];r||(r={},$i[t.name]=r);let s=r[e.toURLString()];s&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new _i(e,Ki,n,i),r[e.toURLString()]=s,s}(l,e,u,new q(e.name,n));return new Yi(h,e)}class Yi{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(vi(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hi(this._repo,fe())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=$i[t];n&&n[e.key]===e||T(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Ii(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&T("Cannot call "+e+" on a deleted database.")}}function Xi(e=(0,i.Mq)(),t){return(0,i.qX)(e,"database").getImmediate({identifier:t})}Pe.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Pe.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Qi;!function(e){l=e}(i.Jn),(0,i.Xd)(new r.wA("database",((e,{instanceIdentifier:t})=>Gi(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),(0,i.KN)(a,c,Qi),(0,i.KN)(a,c,"esm2017")},68633:function(e,t,n){"use strict";n.d(t,{KL:function(){return De},LP:function(){return Oe},Gb:function(){return Re}});var i=n(32238),r=n(8463),s=n(74444),o=n(4424);const a="@firebase/installations",c="0.5.12",l=1e4,u="w:0.5.12",h="FIS_v2",d=36e5,p={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},f=new s.LL("installations","Installations",p);function g(e){return e instanceof s.ZR&&e.code.includes("request-failed")}function m({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function _(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function v(e,t){const n=(await t.json()).error;return f.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function y({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function b(e,{refreshToken:t}){const n=y(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}async function w(e){const t=await e();return t.status>=500&&t.status<600?e():t}function C(e){return new Promise((t=>{setTimeout(t,e)}))}const S=/^[cdef][\w-]{21}$/;function E(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return S.test(t)?t:""}catch(e){return""}}function T(e){return`${e.appName}!${e.appId}`}const I=new Map;function k(e,t){const n=T(e);A(n,t),function(e,t){const n=x();n&&n.postMessage({key:e,fid:t});P()}(n,t)}function A(e,t){const n=I.get(e);if(n)for(const e of n)e(t)}let N=null;function x(){return!N&&"BroadcastChannel"in self&&(N=new BroadcastChannel("[Firebase] FID Change"),N.onmessage=e=>{A(e.data.key,e.data.fid)}),N}function P(){0===I.size&&N&&(N.close(),N=null)}const R="firebase-installations-store";let D=null;function O(){return D||(D=(0,o.X3)("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(R)}})),D}async function L(e,t){const n=T(e),i=(await O()).transaction(R,"readwrite"),r=i.objectStore(R),s=await r.get(n);return await r.put(t,n),await i.done,s&&s.fid===t.fid||k(e,t.fid),t}async function M(e){const t=T(e),n=(await O()).transaction(R,"readwrite");await n.objectStore(R).delete(t),await n.done}async function F(e,t){const n=T(e),i=(await O()).transaction(R,"readwrite"),r=i.objectStore(R),s=await r.get(n),o=t(s);return void 0===o?await r.delete(n):await r.put(o,n),await i.done,!o||s&&s.fid===o.fid||k(e,o.fid),o}async function U(e){let t;const n=await F(e.appConfig,(n=>{const i=function(e){return H(e||{fid:E(),registrationStatus:0})}(n),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(f.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=m(e),r=y(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const o={fid:n,authVersion:h,appId:e.appId,sdkVersion:u},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await w((()=>fetch(i,a)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:_(e.authToken)}}throw await v("Create Installation",c)}(e,t);return L(e.appConfig,n)}catch(n){throw g(n)&&409===n.customData.serverCode?await M(e.appConfig):await L(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:j(e)}:{installationEntry:t}}(e,i);return t=r.registrationPromise,r.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function j(e){let t=await z(e.appConfig);for(;1===t.registrationStatus;)await C(100),t=await z(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await U(e);return n||t}return t}function z(e){return F(e,(e=>{if(!e)throw f.create("installation-not-found");return H(e)}))}function H(e){return 1===(t=e).registrationStatus&&t.registrationTime+l<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function V({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${m(e)}/${t}/authTokens:generate`}(e,n),r=b(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const o={installation:{sdkVersion:u,appId:e.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await w((()=>fetch(i,a)));if(c.ok){return _(await c.json())}throw await v("Generate Auth Token",c)}async function q(e,t=!1){let n;const i=await F(e.appConfig,(i=>{if(!W(i))throw f.create("not-registered");const r=i.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+d}(e)}(r))return i;if(1===r.requestStatus)return n=async function(e,t){let n=await B(e.appConfig);for(;1===n.authToken.requestStatus;)await C(100),n=await B(e.appConfig);const i=n.authToken;return 0===i.requestStatus?q(e,t):i}(e,t),i;{if(!navigator.onLine)throw f.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await V(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await L(e.appConfig,i),n}catch(n){if(!g(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await L(e.appConfig,n)}else await M(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function B(e){return F(e,(e=>{if(!W(e))throw f.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+l<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function W(e){return void 0!==e&&2===e.registrationStatus}async function $(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await U(e);t&&await t}(n);return(await q(n,t)).token}function K(e){return f.create("missing-app-config-values",{valueName:e})}const G="installations",Y=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw K("App Configuration");if(!e.name)throw K("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw K(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,i.qX)(t,"heartbeat"),_delete:()=>Promise.resolve()}},X=e=>{const t=e.getProvider("app").getImmediate(),n=(0,i.qX)(t,G).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await U(t);return i?i.catch(console.error):q(t).catch(console.error),n.fid}(n),getToken:e=>$(n,e)}};(0,i.Xd)(new r.wA(G,Y,"PUBLIC")),(0,i.Xd)(new r.wA("installations-internal",X,"PRIVATE")),(0,i.KN)(a,c),(0,i.KN)(a,c,"esm2017");const Q="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",J="google.c.a.c_id";var Z,ee;function te(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ne(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length);for(let e=0;e<n.length;++e)i[e]=n.charCodeAt(e);return i}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(Z||(Z={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(ee||(ee={}));const ie="fcm_token_details_db",re="fcm_token_object_Store";const se="firebase-messaging-store";let oe=null;function ae(){return oe||(oe=(0,o.X3)("firebase-messaging-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(se)}})),oe}async function ce(e){const t=ue(e),n=await ae(),i=await n.transaction(se).objectStore(se).get(t);if(i)return i;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map((e=>e.name));if(!e.includes(ie))return null}let t=null;return(await(0,o.X3)(ie,5,{upgrade:async(n,i,r,s)=>{var o;if(i<2)return;if(!n.objectStoreNames.contains(re))return;const a=s.objectStore(re),c=await a.index("fcmSenderId").get(e);if(await a.clear(),c)if(2===i){const e=c;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(o=e.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:te(e.vapidKey)}}}else if(3===i){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:te(e.auth),p256dh:te(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:te(e.vapidKey)}}}else if(4===i){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:te(e.auth),p256dh:te(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:te(e.vapidKey)}}}}})).close(),await(0,o.Lj)(ie),await(0,o.Lj)("fcm_vapid_details_db"),await(0,o.Lj)("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await le(e,t),t}}async function le(e,t){const n=ue(e),i=(await ae()).transaction(se,"readwrite");return await i.objectStore(se).put(t,n),await i.done,t}function ue({appConfig:e}){return e.appId}const he={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},de=new s.LL("messaging","Messaging",he);async function pe(e,t){var n;const i={method:"DELETE",headers:await ge(e)};try{const n=await fetch(`${fe(e.appConfig)}/${t}`,i),r=await n.json();if(r.error){const e=r.error.message;throw de.create("token-unsubscribe-failed",{errorInfo:e})}}catch(e){throw de.create("token-unsubscribe-failed",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()})}}function fe({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}async function ge({appConfig:e,installations:t}){const n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function me({p256dh:e,auth:t,endpoint:n,vapidKey:i}){const r={web:{endpoint:n,auth:t,p256dh:e}};return i!==Q&&(r.web.applicationPubKey=i),r}async function _e(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ne(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:te(t.getKey("auth")),p256dh:te(t.getKey("p256dh"))},i=await ce(e.firebaseDependencies);if(i){if(function(e,t){const n=t.vapidKey===e.vapidKey,i=t.endpoint===e.endpoint,r=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&i&&r&&s}(i.subscriptionOptions,n))return Date.now()>=i.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){var n;const i=await ge(e),r=me(t.subscriptionOptions),s={method:"PATCH",headers:i,body:JSON.stringify(r)};let o;try{const n=await fetch(`${fe(e.appConfig)}/${t.token}`,s);o=await n.json()}catch(e){throw de.create("token-update-failed",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()})}if(o.error){const e=o.error.message;throw de.create("token-update-failed",{errorInfo:e})}if(!o.token)throw de.create("token-update-no-token");return o.token}(e.firebaseDependencies,t),i=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await le(e.firebaseDependencies,i),n}catch(t){throw await ve(e),t}}(e,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{await pe(e.firebaseDependencies,i.token)}catch(e){console.warn(e)}return ye(e.firebaseDependencies,n)}return ye(e.firebaseDependencies,n)}async function ve(e){const t=await ce(e.firebaseDependencies);t&&(await pe(e.firebaseDependencies,t.token),await async function(e){const t=ue(e),n=(await ae()).transaction(se,"readwrite");await n.objectStore(se).delete(t),await n.done}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function ye(e,t){const n=await async function(e,t){var n;const i=await ge(e),r=me(t),s={method:"POST",headers:i,body:JSON.stringify(r)};let o;try{const t=await fetch(fe(e.appConfig),s);o=await t.json()}catch(e){throw de.create("token-subscribe-failed",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()})}if(o.error){const e=o.error.message;throw de.create("token-subscribe-failed",{errorInfo:e})}if(!o.token)throw de.create("token-subscribe-no-token");return o.token}(e,t),i={token:n,createTime:Date.now(),subscriptionOptions:t};return await le(e,i),i.token}function be(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const i=t.notification.body;i&&(e.notification.body=i);const r=t.notification.image;r&&(e.notification.image=r)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var n,i,r,s,o;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const a=null!==(r=null===(i=t.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==r?r:null===(s=t.notification)||void 0===s?void 0:s.click_action;a&&(e.fcmOptions.link=a);const c=null===(o=t.fcmOptions)||void 0===o?void 0:o.analytics_label;c&&(e.fcmOptions.analyticsLabel=c)}(t,e),t}function we(e,t){const n=[];for(let i=0;i<e.length;i++)n.push(e.charAt(i)),i<t.length&&n.push(t.charAt(i));return n.join("")}function Ce(e){return de.create("missing-app-config-values",{valueName:e})}we("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),we("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Se{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function(e){if(!e||!e.options)throw Ce("App Configuration Object");if(!e.name)throw Ce("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const e of t)if(!n[e])throw Ce(e);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function Ee(e){var t;try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch((()=>{}))}catch(e){throw de.create("failed-service-worker-registration",{browserErrorMessage:null===(t=e)||void 0===t?void 0:t.message})}}async function Te(e,t){if(!navigator)throw de.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw de.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=Q)}(e,null==t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await Ee(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw de.create("invalid-sw-registration");e.swRegistration=t}}(e,null==t?void 0:t.serviceWorkerRegistration),_e(e)}async function Ie(e,t,n){const i=function(e){switch(e){case ee.NOTIFICATION_CLICKED:return"notification_open";case ee.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n["google.c.a.c_id"],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function ke(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===ee.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(be(n)):e.onMessageHandler.next(be(n)));const i=n.data;var r;"object"==typeof(r=i)&&r&&J in r&&"1"===i["google.c.a.e"]&&await Ie(e,n.messageType,i)}const Ae="@firebase/messaging",Ne="0.9.16",xe=e=>{const t=new Se(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(e=>ke(t,e))),t},Pe=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>Te(t,e)}};async function Re(){try{await(0,s.eu)()}catch(e){return!1}return"undefined"!=typeof window&&(0,s.hl)()&&(0,s.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function De(e=(0,i.Mq)()){return Re().then((e=>{if(!e)throw de.create("unsupported-browser")}),(e=>{throw de.create("indexed-db-unsupported")})),(0,i.qX)((0,s.m9)(e),"messaging").getImmediate()}async function Oe(e,t){return Te(e=(0,s.m9)(e),t)}(0,i.Xd)(new r.wA("messaging",xe,"PUBLIC")),(0,i.Xd)(new r.wA("messaging-internal",Pe,"PRIVATE")),(0,i.KN)(Ae,Ne),(0,i.KN)(Ae,Ne,"esm2017")},7422:function(e){var t=/^(?:submit|button|image|reset|file)$/i,n=/^(?:input|select|textarea|keygen)/i,i=/(\[[^\[\]]*\])/g;function r(e,t,n){if(0===t.length)return e=n;var i=t.shift(),s=i.match(/^\[(.+?)\]$/);if("[]"===i)return e=e||[],Array.isArray(e)?e.push(r(null,t,n)):(e._values=e._values||[],e._values.push(r(null,t,n))),e;if(s){var o=s[1],a=+o;isNaN(a)?(e=e||{})[o]=r(e[o],t,n):(e=e||[])[a]=r(e[a],t,n)}else e[i]=r(e[i],t,n);return e}function s(e,t,n){if(t.match(i)){r(e,function(e){var t=[],n=new RegExp(i),r=/^([^\[\]]*)/.exec(e);for(r[1]&&t.push(r[1]);null!==(r=n.exec(e));)t.push(r[1]);return t}(t),n)}else{var s=e[t];s?(Array.isArray(s)||(e[t]=[s]),e[t].push(n)):e[t]=n}return e}function o(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}e.exports=function(e,i){"object"!=typeof i?i={hash:!!i}:void 0===i.hash&&(i.hash=!0);for(var r=i.hash?{}:"",a=i.serializer||(i.hash?s:o),c=e&&e.elements?e.elements:[],l=Object.create(null),u=0;u<c.length;++u){var h=c[u];if((i.disabled||!h.disabled)&&h.name&&(n.test(h.nodeName)&&!t.test(h.type))){var d=h.name,p=h.value;if("checkbox"!==h.type&&"radio"!==h.type||h.checked||(p=void 0),i.empty){if("checkbox"!==h.type||h.checked||(p=""),"radio"===h.type&&(l[h.name]||h.checked?h.checked&&(l[h.name]=!0):l[h.name]=!1),null==p&&"radio"==h.type)continue}else if(!p)continue;if("select-multiple"!==h.type)r=a(r,d,p);else{p=[];for(var f=h.options,g=!1,m=0;m<f.length;++m){var _=f[m],v=i.empty&&!_.value,y=_.value||v;_.selected&&y&&(g=!0,r=i.hash&&"[]"!==d.slice(d.length-2)?a(r,d+"[]",_.value):a(r,d,_.value))}!g&&i.empty&&(r=a(r,d,""))}}}if(i.empty)for(var d in l)l[d]||(r=a(r,d,""));return r}},77090:function(e){!function(t,n){var i=function(e,t,n){"use strict";var i,r;if(function(){var t,n={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(t in r=e.lazySizesConfig||e.lazysizesConfig||{},n)t in r||(r[t]=n[t])}(),!t||!t.getElementsByClassName)return{init:function(){},cfg:r,noSupport:!0};var s=t.documentElement,o=e.HTMLPictureElement,a="addEventListener",c="getAttribute",l=e[a].bind(e),u=e.setTimeout,h=e.requestAnimationFrame||u,d=e.requestIdleCallback,p=/^picture$/i,f=["load","error","lazyincluded","_lazyloaded"],g={},m=Array.prototype.forEach,_=function(e,t){return g[t]||(g[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),g[t].test(e[c]("class")||"")&&g[t]},v=function(e,t){_(e,t)||e.setAttribute("class",(e[c]("class")||"").trim()+" "+t)},y=function(e,t){var n;(n=_(e,t))&&e.setAttribute("class",(e[c]("class")||"").replace(n," "))},b=function(e,t,n){var i=n?a:"removeEventListener";n&&b(e,t),f.forEach((function(n){e[i](n,t)}))},w=function(e,n,r,s,o){var a=t.createEvent("Event");return r||(r={}),r.instance=i,a.initEvent(n,!s,!o),a.detail=r,e.dispatchEvent(a),a},C=function(t,n){var i;!o&&(i=e.picturefill||r.pf)?(n&&n.src&&!t[c]("srcset")&&t.setAttribute("srcset",n.src),i({reevaluate:!0,elements:[t]})):n&&n.src&&(t.src=n.src)},S=function(e,t){return(getComputedStyle(e,null)||{})[t]},E=function(e,t,n){for(n=n||e.offsetWidth;n<r.minSize&&t&&!e._lazysizesWidth;)n=t.offsetWidth,t=t.parentNode;return n},T=(ve=[],ye=[],be=ve,we=function(){var e=be;for(be=ve.length?ye:ve,me=!0,_e=!1;e.length;)e.shift()();me=!1},Ce=function(e,n){me&&!n?e.apply(this,arguments):(be.push(e),_e||(_e=!0,(t.hidden?u:h)(we)))},Ce._lsFlush=we,Ce),I=function(e,t){return t?function(){T(e)}:function(){var t=this,n=arguments;T((function(){e.apply(t,n)}))}},k=function(e){var t,i=0,s=r.throttleDelay,o=r.ricTimeout,a=function(){t=!1,i=n.now(),e()},c=d&&o>49?function(){d(a,{timeout:o}),o!==r.ricTimeout&&(o=r.ricTimeout)}:I((function(){u(a)}),!0);return function(e){var r;(e=!0===e)&&(o=33),t||(t=!0,(r=s-(n.now()-i))<0&&(r=0),e||r<9?c():u(c,r))}},A=function(e){var t,i,r=99,s=function(){t=null,e()},o=function(){var e=n.now()-i;e<r?u(o,r-e):(d||s)(s)};return function(){i=n.now(),t||(t=u(o,r))}},N=(G=/^img$/i,Y=/^iframe$/i,X="onscroll"in e&&!/(gle|ing)bot/.test(navigator.userAgent),Q=0,J=0,Z=0,ee=-1,te=function(e){Z--,(!e||Z<0||!e.target)&&(Z=0)},ne=function(e){return null==K&&(K="hidden"==S(t.body,"visibility")),K||!("hidden"==S(e.parentNode,"visibility")&&"hidden"==S(e,"visibility"))},ie=function(e,n){var i,r=e,o=ne(e);for(q-=n,$+=n,B-=n,W+=n;o&&(r=r.offsetParent)&&r!=t.body&&r!=s;)(o=(S(r,"opacity")||1)>0)&&"visible"!=S(r,"overflow")&&(i=r.getBoundingClientRect(),o=W>i.left&&B<i.right&&$>i.top-1&&q<i.bottom+1);return o},re=function(){var e,n,o,a,l,u,h,d,p,f,g,m,_=i.elements;if((j=r.loadMode)&&Z<8&&(e=_.length)){for(n=0,ee++;n<e;n++)if(_[n]&&!_[n]._lazyRace)if(!X||i.prematureUnveil&&i.prematureUnveil(_[n]))de(_[n]);else if((d=_[n][c]("data-expand"))&&(u=1*d)||(u=J),f||(f=!r.expand||r.expand<1?s.clientHeight>500&&s.clientWidth>500?500:370:r.expand,i._defEx=f,g=f*r.expFactor,m=r.hFac,K=null,J<g&&Z<1&&ee>2&&j>2&&!t.hidden?(J=g,ee=0):J=j>1&&ee>1&&Z<6?f:Q),p!==u&&(H=innerWidth+u*m,V=innerHeight+u,h=-1*u,p=u),o=_[n].getBoundingClientRect(),($=o.bottom)>=h&&(q=o.top)<=V&&(W=o.right)>=h*m&&(B=o.left)<=H&&($||W||B||q)&&(r.loadHidden||ne(_[n]))&&(F&&Z<3&&!d&&(j<3||ee<4)||ie(_[n],u))){if(de(_[n]),l=!0,Z>9)break}else!l&&F&&!a&&Z<4&&ee<4&&j>2&&(M[0]||r.preloadAfterLoad)&&(M[0]||!d&&($||W||B||q||"auto"!=_[n][c](r.sizesAttr)))&&(a=M[0]||_[n]);a&&!l&&de(a)}},se=k(re),oe=function(e){var t=e.target;t._lazyCache?delete t._lazyCache:(te(e),v(t,r.loadedClass),y(t,r.loadingClass),b(t,ce),w(t,"lazyloaded"))},ae=I(oe),ce=function(e){ae({target:e.target})},le=function(e,t){var n=e.getAttribute("data-load-mode")||r.iframeLoadMode;0==n?e.contentWindow.location.replace(t):1==n&&(e.src=t)},ue=function(e){var t,n=e[c](r.srcsetAttr);(t=r.customMedia[e[c]("data-media")||e[c]("media")])&&e.setAttribute("media",t),n&&e.setAttribute("srcset",n)},he=I((function(e,t,n,i,s){var o,a,l,h,d,f;(d=w(e,"lazybeforeunveil",t)).defaultPrevented||(i&&(n?v(e,r.autosizesClass):e.setAttribute("sizes",i)),a=e[c](r.srcsetAttr),o=e[c](r.srcAttr),s&&(h=(l=e.parentNode)&&p.test(l.nodeName||"")),f=t.firesLoad||"src"in e&&(a||o||h),d={target:e},v(e,r.loadingClass),f&&(clearTimeout(U),U=u(te,2500),b(e,ce,!0)),h&&m.call(l.getElementsByTagName("source"),ue),a?e.setAttribute("srcset",a):o&&!h&&(Y.test(e.nodeName)?le(e,o):e.src=o),s&&(a||h)&&C(e,{src:o})),e._lazyRace&&delete e._lazyRace,y(e,r.lazyClass),T((function(){var t=e.complete&&e.naturalWidth>1;f&&!t||(t&&v(e,r.fastLoadedClass),oe(d),e._lazyCache=!0,u((function(){"_lazyCache"in e&&delete e._lazyCache}),9)),"lazy"==e.loading&&Z--}),!0)})),de=function(e){if(!e._lazyRace){var t,n=G.test(e.nodeName),i=n&&(e[c](r.sizesAttr)||e[c]("sizes")),s="auto"==i;(!s&&F||!n||!e[c]("src")&&!e.srcset||e.complete||_(e,r.errorClass)||!_(e,r.lazyClass))&&(t=w(e,"lazyunveilread").detail,s&&x.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,Z++,he(e,t,s,i,n))}},pe=A((function(){r.loadMode=3,se()})),fe=function(){3==r.loadMode&&(r.loadMode=2),pe()},ge=function(){F||(n.now()-z<999?u(ge,999):(F=!0,r.loadMode=3,se(),l("scroll",fe,!0)))},{_:function(){z=n.now(),i.elements=t.getElementsByClassName(r.lazyClass),M=t.getElementsByClassName(r.lazyClass+" "+r.preloadClass),l("scroll",se,!0),l("resize",se,!0),l("pageshow",(function(e){if(e.persisted){var n=t.querySelectorAll("."+r.loadingClass);n.length&&n.forEach&&h((function(){n.forEach((function(e){e.complete&&de(e)}))}))}})),e.MutationObserver?new MutationObserver(se).observe(s,{childList:!0,subtree:!0,attributes:!0}):(s[a]("DOMNodeInserted",se,!0),s[a]("DOMAttrModified",se,!0),setInterval(se,999)),l("hashchange",se,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach((function(e){t[a](e,se,!0)})),/d$|^c/.test(t.readyState)?ge():(l("load",ge),t[a]("DOMContentLoaded",se),u(ge,2e4)),i.elements.length?(re(),T._lsFlush()):se()},checkElems:se,unveil:de,_aLSL:fe}),x=(D=I((function(e,t,n,i){var r,s,o;if(e._lazysizesWidth=i,i+="px",e.setAttribute("sizes",i),p.test(t.nodeName||""))for(s=0,o=(r=t.getElementsByTagName("source")).length;s<o;s++)r[s].setAttribute("sizes",i);n.detail.dataAttr||C(e,n.detail)})),O=function(e,t,n){var i,r=e.parentNode;r&&(n=E(e,r,n),(i=w(e,"lazybeforesizes",{width:n,dataAttr:!!t})).defaultPrevented||(n=i.detail.width)&&n!==e._lazysizesWidth&&D(e,r,i,n))},L=A((function(){var e,t=R.length;if(t)for(e=0;e<t;e++)O(R[e])})),{_:function(){R=t.getElementsByClassName(r.autosizesClass),l("resize",L)},checkElems:L,updateElem:O}),P=function(){!P.i&&t.getElementsByClassName&&(P.i=!0,x._(),N._())};var R,D,O,L;var M,F,U,j,z,H,V,q,B,W,$,K,G,Y,X,Q,J,Z,ee,te,ne,ie,re,se,oe,ae,ce,le,ue,he,de,pe,fe,ge;var me,_e,ve,ye,be,we,Ce;return u((function(){r.init&&P()})),i={cfg:r,autoSizer:x,loader:N,init:P,uP:C,aC:v,rC:y,hC:_,fire:w,gW:E,rAF:T}}(t,t.document,Date);t.lazySizes=i,e.exports&&(e.exports=i)}("undefined"!=typeof window?window:{})},74211:function(e,t){!function(e){"use strict";function t(e){return n(e)&&"function"==typeof e.from}function n(e){return"object"==typeof e&&"function"==typeof e.to}function i(e){e.parentElement.removeChild(e)}function r(e){return null!=e}function s(e){e.preventDefault()}function o(e){return e.filter((function(e){return!this[e]&&(this[e]=!0)}),{})}function a(e,t){return Math.round(e/t)*t}function c(e,t){var n=e.getBoundingClientRect(),i=e.ownerDocument,r=i.documentElement,s=_(i);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(s.x=0),t?n.top+s.y-r.clientTop:n.left+s.x-r.clientLeft}function l(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function u(e,t,n){n>0&&(f(e,t),setTimeout((function(){g(e,t)}),n))}function h(e){return Math.max(Math.min(e,100),0)}function d(e){return Array.isArray(e)?e:[e]}function p(e){var t=(e=String(e)).split(".");return t.length>1?t[1].length:0}function f(e,t){e.classList&&!/\s/.test(t)?e.classList.add(t):e.className+=" "+t}function g(e,t){e.classList&&!/\s/.test(t)?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function m(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function _(e){var t=void 0!==window.pageXOffset,n="CSS1Compat"===(e.compatMode||"");return{x:t?window.pageXOffset:n?e.documentElement.scrollLeft:e.body.scrollLeft,y:t?window.pageYOffset:n?e.documentElement.scrollTop:e.body.scrollTop}}function v(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function y(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}function b(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function w(e,t){return 100/(t-e)}function C(e,t,n){return 100*t/(e[n+1]-e[n])}function S(e,t){return C(e,e[0]<0?t+Math.abs(e[0]):t-e[0],0)}function E(e,t){return t*(e[1]-e[0])/100+e[0]}function T(e,t){for(var n=1;e>=t[n];)n+=1;return n}function I(e,t,n){if(n>=e.slice(-1)[0])return 100;var i=T(n,e),r=e[i-1],s=e[i],o=t[i-1],a=t[i];return o+S([r,s],n)/w(o,a)}function k(e,t,n){if(n>=100)return e.slice(-1)[0];var i=T(n,t),r=e[i-1],s=e[i],o=t[i-1];return E([r,s],(n-o)*w(o,t[i]))}function A(e,t,n,i){if(100===i)return i;var r=T(i,e),s=e[r-1],o=e[r];return n?i-s>(o-s)/2?o:s:t[r-1]?e[r-1]+a(i-e[r-1],t[r-1]):i}var N,x;e.PipsMode=void 0,(x=e.PipsMode||(e.PipsMode={})).Range="range",x.Steps="steps",x.Positions="positions",x.Count="count",x.Values="values",e.PipsType=void 0,(N=e.PipsType||(e.PipsType={}))[N.None=-1]="None",N[N.NoValue=0]="NoValue",N[N.LargeValue=1]="LargeValue",N[N.SmallValue=2]="SmallValue";var P=function(){function e(e,t,n){var i;this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.snap=t;var r=[];for(Object.keys(e).forEach((function(t){r.push([d(e[t]),t])})),r.sort((function(e,t){return e[0][0]-t[0][0]})),i=0;i<r.length;i++)this.handleEntryPoint(r[i][1],r[i][0]);for(this.xNumSteps=this.xSteps.slice(0),i=0;i<this.xNumSteps.length;i++)this.handleStepPoint(i,this.xNumSteps[i])}return e.prototype.getDistance=function(e){for(var t=[],n=0;n<this.xNumSteps.length-1;n++)t[n]=C(this.xVal,e,n);return t},e.prototype.getAbsoluteDistance=function(e,t,n){var i,r=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[r+1];)r++;else e===this.xPct[this.xPct.length-1]&&(r=this.xPct.length-2);n||e!==this.xPct[r+1]||r++,null===t&&(t=[]);var s=1,o=t[r],a=0,c=0,l=0,u=0;for(i=n?(e-this.xPct[r])/(this.xPct[r+1]-this.xPct[r]):(this.xPct[r+1]-e)/(this.xPct[r+1]-this.xPct[r]);o>0;)a=this.xPct[r+1+u]-this.xPct[r+u],t[r+u]*s+100-100*i>100?(c=a*i,s=(o-100*i)/t[r+u],i=1):(c=t[r+u]*a/100*s,s=0),n?(l-=c,this.xPct.length+u>=1&&u--):(l+=c,this.xPct.length-u>=1&&u++),o=t[r+u]*s;return e+l},e.prototype.toStepping=function(e){return e=I(this.xVal,this.xPct,e)},e.prototype.fromStepping=function(e){return k(this.xVal,this.xPct,e)},e.prototype.getStep=function(e){return e=A(this.xPct,this.xSteps,this.snap,e)},e.prototype.getDefaultStep=function(e,t,n){var i=T(e,this.xPct);return(100===e||t&&e===this.xPct[i-1])&&(i=Math.max(i-1,1)),(this.xVal[i]-this.xVal[i-1])/n},e.prototype.getNearbySteps=function(e){var t=T(e,this.xPct);return{stepBefore:{startValue:this.xVal[t-2],step:this.xNumSteps[t-2],highestStep:this.xHighestCompleteStep[t-2]},thisStep:{startValue:this.xVal[t-1],step:this.xNumSteps[t-1],highestStep:this.xHighestCompleteStep[t-1]},stepAfter:{startValue:this.xVal[t],step:this.xNumSteps[t],highestStep:this.xHighestCompleteStep[t]}}},e.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(p);return Math.max.apply(null,e)},e.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},e.prototype.convert=function(e){return this.getStep(this.toStepping(e))},e.prototype.handleEntryPoint=function(e,t){var n;if(!l(n="min"===e?0:"max"===e?100:parseFloat(e))||!l(t[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(n),this.xVal.push(t[0]);var i=Number(t[1]);n?this.xSteps.push(!isNaN(i)&&i):isNaN(i)||(this.xSteps[0]=i),this.xHighestCompleteStep.push(0)},e.prototype.handleStepPoint=function(e,t){if(t)if(this.xVal[e]!==this.xVal[e+1]){this.xSteps[e]=C([this.xVal[e],this.xVal[e+1]],t,0)/w(this.xPct[e],this.xPct[e+1]);var n=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],i=Math.ceil(Number(n.toFixed(3))-1),r=this.xVal[e]+this.xNumSteps[e]*i;this.xHighestCompleteStep[e]=r}else this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e]},e}(),R={to:function(e){return void 0===e?"":e.toFixed(2)},from:Number},D={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},O={tooltips:".__tooltips",aria:".__aria"};function L(e,t){if(!l(t))throw new Error("noUiSlider: 'step' is not numeric.");e.singleStep=t}function M(e,t){if(!l(t))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");e.keyboardPageMultiplier=t}function F(e,t){if(!l(t))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");e.keyboardMultiplier=t}function U(e,t){if(!l(t))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");e.keyboardDefaultStep=t}function j(e,t){if("object"!=typeof t||Array.isArray(t))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===t.min||void 0===t.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");e.spectrum=new P(t,e.snap||!1,e.singleStep)}function z(e,t){if(t=d(t),!Array.isArray(t)||!t.length)throw new Error("noUiSlider: 'start' option is incorrect.");e.handles=t.length,e.start=t}function H(e,t){if("boolean"!=typeof t)throw new Error("noUiSlider: 'snap' option must be a boolean.");e.snap=t}function V(e,t){if("boolean"!=typeof t)throw new Error("noUiSlider: 'animate' option must be a boolean.");e.animate=t}function q(e,t){if("number"!=typeof t)throw new Error("noUiSlider: 'animationDuration' option must be a number.");e.animationDuration=t}function B(e,t){var n,i=[!1];if("lower"===t?t=[!0,!1]:"upper"===t&&(t=[!1,!0]),!0===t||!1===t){for(n=1;n<e.handles;n++)i.push(t);i.push(!1)}else{if(!Array.isArray(t)||!t.length||t.length!==e.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");i=t}e.connect=i}function W(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function $(e,t){if(!l(t))throw new Error("noUiSlider: 'margin' option must be numeric.");0!==t&&(e.margin=e.spectrum.getDistance(t))}function K(e,t){if(!l(t))throw new Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getDistance(t),!e.limit||e.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function G(e,t){var n;if(!l(t)&&!Array.isArray(t))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(t)&&2!==t.length&&!l(t[0])&&!l(t[1]))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==t){for(Array.isArray(t)||(t=[t,t]),e.padding=[e.spectrum.getDistance(t[0]),e.spectrum.getDistance(t[1])],n=0;n<e.spectrum.xNumSteps.length-1;n++)if(e.padding[0][n]<0||e.padding[1][n]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var i=t[0]+t[1],r=e.spectrum.xVal[0];if(i/(e.spectrum.xVal[e.spectrum.xVal.length-1]-r)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function Y(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function X(e,t){if("string"!=typeof t)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=t.indexOf("tap")>=0,i=t.indexOf("drag")>=0,r=t.indexOf("fixed")>=0,s=t.indexOf("snap")>=0,o=t.indexOf("hover")>=0,a=t.indexOf("unconstrained")>=0,c=t.indexOf("drag-all")>=0,l=t.indexOf("smooth-steps")>=0;if(r){if(2!==e.handles)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");$(e,e.start[1]-e.start[0])}if(a&&(e.margin||e.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:n||s,drag:i,dragAll:c,smoothSteps:l,fixed:r,snap:s,hover:o,unconstrained:a}}function Q(e,t){if(!1!==t)if(!0===t||n(t)){e.tooltips=[];for(var i=0;i<e.handles;i++)e.tooltips.push(t)}else{if((t=d(t)).length!==e.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");t.forEach((function(e){if("boolean"!=typeof e&&!n(e))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")})),e.tooltips=t}}function J(e,t){if(t.length!==e.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");e.handleAttributes=t}function Z(e,t){if(!n(t))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");e.ariaFormat=t}function ee(e,n){if(!t(n))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");e.format=n}function te(e,t){if("boolean"!=typeof t)throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");e.keyboardSupport=t}function ne(e,t){e.documentElement=t}function ie(e,t){if("string"!=typeof t&&!1!==t)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");e.cssPrefix=t}function re(e,t){if("object"!=typeof t)throw new Error("noUiSlider: 'cssClasses' must be an object.");"string"==typeof e.cssPrefix?(e.cssClasses={},Object.keys(t).forEach((function(n){e.cssClasses[n]=e.cssPrefix+t[n]}))):e.cssClasses=t}function se(e){var t={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:R,format:R},n={step:{r:!1,t:L},keyboardPageMultiplier:{r:!1,t:M},keyboardMultiplier:{r:!1,t:F},keyboardDefaultStep:{r:!1,t:U},start:{r:!0,t:z},connect:{r:!0,t:B},direction:{r:!0,t:Y},snap:{r:!1,t:H},animate:{r:!1,t:V},animationDuration:{r:!1,t:q},range:{r:!0,t:j},orientation:{r:!1,t:W},margin:{r:!1,t:$},limit:{r:!1,t:K},padding:{r:!1,t:G},behaviour:{r:!0,t:X},ariaFormat:{r:!1,t:Z},format:{r:!1,t:ee},tooltips:{r:!1,t:Q},keyboardSupport:{r:!0,t:te},documentElement:{r:!1,t:ne},cssPrefix:{r:!0,t:ie},cssClasses:{r:!0,t:re},handleAttributes:{r:!1,t:J}},i={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:D,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(n).forEach((function(s){if(r(e[s])||void 0!==i[s])n[s].t(t,r(e[s])?e[s]:i[s]);else if(n[s].r)throw new Error("noUiSlider: '"+s+"' is required.")})),t.pips=e.pips;var s=document.createElement("div"),o=void 0!==s.style.msTransform,a=void 0!==s.style.transform;t.transformRule=a?"transform":o?"msTransform":"webkitTransform";var c=[["left","top"],["right","bottom"]];return t.style=c[t.dir][t.ort],t}function oe(t,n,a){var l,p,w,C,S,E=v(),T=b()&&y(),I=t,k=n.spectrum,A=[],N=[],x=[],P=0,R={},D=t.ownerDocument,L=n.documentElement||D.documentElement,M=D.body,F="rtl"===D.dir||1===n.ort?0:100;function U(e,t){var n=D.createElement("div");return t&&f(n,t),e.appendChild(n),n}function j(e,t){var i=U(e,n.cssClasses.origin),r=U(i,n.cssClasses.handle);if(U(r,n.cssClasses.touchArea),r.setAttribute("data-handle",String(t)),n.keyboardSupport&&(r.setAttribute("tabindex","0"),r.addEventListener("keydown",(function(e){return pe(e,t)}))),void 0!==n.handleAttributes){var s=n.handleAttributes[t];Object.keys(s).forEach((function(e){r.setAttribute(e,s[e])}))}return r.setAttribute("role","slider"),r.setAttribute("aria-orientation",n.ort?"vertical":"horizontal"),0===t?f(r,n.cssClasses.handleLower):t===n.handles-1&&f(r,n.cssClasses.handleUpper),i}function z(e,t){return!!t&&U(e,n.cssClasses.connect)}function H(e,t){var i=U(t,n.cssClasses.connects);p=[],(w=[]).push(z(i,e[0]));for(var r=0;r<n.handles;r++)p.push(j(t,r)),x[r]=r,w.push(z(i,e[r+1]))}function V(e){return f(e,n.cssClasses.target),0===n.dir?f(e,n.cssClasses.ltr):f(e,n.cssClasses.rtl),0===n.ort?f(e,n.cssClasses.horizontal):f(e,n.cssClasses.vertical),f(e,"rtl"===getComputedStyle(e).direction?n.cssClasses.textDirectionRtl:n.cssClasses.textDirectionLtr),U(e,n.cssClasses.base)}function q(e,t){return!(!n.tooltips||!n.tooltips[t])&&U(e.firstChild,n.cssClasses.tooltip)}function B(){return I.hasAttribute("disabled")}function W(e){return p[e].hasAttribute("disabled")}function $(){S&&(_e("update"+O.tooltips),S.forEach((function(e){e&&i(e)})),S=null)}function K(){$(),S=p.map(q),ge("update"+O.tooltips,(function(e,t,i){if(S&&n.tooltips&&!1!==S[t]){var r=e[t];!0!==n.tooltips[t]&&(r=n.tooltips[t].to(i[t])),S[t].innerHTML=r}}))}function G(){_e("update"+O.aria),ge("update"+O.aria,(function(e,t,i,r,s){x.forEach((function(e){var t=p[e],r=ye(N,e,0,!0,!0,!0),o=ye(N,e,100,!0,!0,!0),a=s[e],c=String(n.ariaFormat.to(i[e]));r=k.fromStepping(r).toFixed(1),o=k.fromStepping(o).toFixed(1),a=k.fromStepping(a).toFixed(1),t.children[0].setAttribute("aria-valuemin",r),t.children[0].setAttribute("aria-valuemax",o),t.children[0].setAttribute("aria-valuenow",a),t.children[0].setAttribute("aria-valuetext",c)}))}))}function Y(t){if(t.mode===e.PipsMode.Range||t.mode===e.PipsMode.Steps)return k.xVal;if(t.mode===e.PipsMode.Count){if(t.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var n=t.values-1,i=100/n,r=[];n--;)r[n]=n*i;return r.push(100),X(r,t.stepped)}return t.mode===e.PipsMode.Positions?X(t.values,t.stepped):t.mode===e.PipsMode.Values?t.stepped?t.values.map((function(e){return k.fromStepping(k.getStep(k.toStepping(e)))})):t.values:[]}function X(e,t){return e.map((function(e){return k.fromStepping(t?k.getStep(e):e)}))}function Q(t){function n(e,t){return Number((e+t).toFixed(7))}var i=Y(t),r={},s=k.xVal[0],a=k.xVal[k.xVal.length-1],c=!1,l=!1,u=0;return(i=o(i.slice().sort((function(e,t){return e-t}))))[0]!==s&&(i.unshift(s),c=!0),i[i.length-1]!==a&&(i.push(a),l=!0),i.forEach((function(s,o){var a,h,d,p,f,g,m,_,v,y,b=s,w=i[o+1],C=t.mode===e.PipsMode.Steps;for(C&&(a=k.xNumSteps[o]),a||(a=w-b),void 0===w&&(w=b),a=Math.max(a,1e-7),h=b;h<=w;h=n(h,a)){for(_=(f=(p=k.toStepping(h))-u)/(t.density||1),y=f/(v=Math.round(_)),d=1;d<=v;d+=1)r[(g=u+d*y).toFixed(5)]=[k.fromStepping(g),0];m=i.indexOf(h)>-1?e.PipsType.LargeValue:C?e.PipsType.SmallValue:e.PipsType.NoValue,!o&&c&&h!==w&&(m=0),h===w&&l||(r[p.toFixed(5)]=[h,m]),u=p}})),r}function J(t,i,r){var s,o,a=D.createElement("div"),c=((s={})[e.PipsType.None]="",s[e.PipsType.NoValue]=n.cssClasses.valueNormal,s[e.PipsType.LargeValue]=n.cssClasses.valueLarge,s[e.PipsType.SmallValue]=n.cssClasses.valueSub,s),l=((o={})[e.PipsType.None]="",o[e.PipsType.NoValue]=n.cssClasses.markerNormal,o[e.PipsType.LargeValue]=n.cssClasses.markerLarge,o[e.PipsType.SmallValue]=n.cssClasses.markerSub,o),u=[n.cssClasses.valueHorizontal,n.cssClasses.valueVertical],h=[n.cssClasses.markerHorizontal,n.cssClasses.markerVertical];function d(e,t){var i=t===n.cssClasses.value,r=i?c:l;return t+" "+(i?u:h)[n.ort]+" "+r[e]}function p(t,s,o){if((o=i?i(s,o):o)!==e.PipsType.None){var c=U(a,!1);c.className=d(o,n.cssClasses.marker),c.style[n.style]=t+"%",o>e.PipsType.NoValue&&((c=U(a,!1)).className=d(o,n.cssClasses.value),c.setAttribute("data-value",String(s)),c.style[n.style]=t+"%",c.innerHTML=String(r.to(s)))}}return f(a,n.cssClasses.pips),f(a,0===n.ort?n.cssClasses.pipsHorizontal:n.cssClasses.pipsVertical),Object.keys(t).forEach((function(e){p(e,t[e][0],t[e][1])})),a}function Z(){C&&(i(C),C=null)}function ee(e){Z();var t=Q(e),n=e.filter,i=e.format||{to:function(e){return String(Math.round(e))}};return C=I.appendChild(J(t,n,i))}function te(){var e=l.getBoundingClientRect(),t="offset"+["Width","Height"][n.ort];return 0===n.ort?e.width||l[t]:e.height||l[t]}function ne(e,t,i,r){var s=function(s){var o=ie(s,r.pageOffset,r.target||t);return!!o&&!(B()&&!r.doNotReject)&&!(m(I,n.cssClasses.tap)&&!r.doNotReject)&&!(e===E.start&&void 0!==o.buttons&&o.buttons>1)&&(!r.hover||!o.buttons)&&(T||o.preventDefault(),o.calcPoint=o.points[n.ort],void i(o,r))},o=[];return e.split(" ").forEach((function(e){t.addEventListener(e,s,!!T&&{passive:!0}),o.push([e,s])})),o}function ie(e,t,n){var i=0===e.type.indexOf("touch"),r=0===e.type.indexOf("mouse"),s=0===e.type.indexOf("pointer"),o=0,a=0;if(0===e.type.indexOf("MSPointer")&&(s=!0),"mousedown"===e.type&&!e.buttons&&!e.touches)return!1;if(i){var c=function(t){var i=t.target;return i===n||n.contains(i)||e.composed&&e.composedPath().shift()===n};if("touchstart"===e.type){var l=Array.prototype.filter.call(e.touches,c);if(l.length>1)return!1;o=l[0].pageX,a=l[0].pageY}else{var u=Array.prototype.find.call(e.changedTouches,c);if(!u)return!1;o=u.pageX,a=u.pageY}}return t=t||_(D),(r||s)&&(o=e.clientX+t.x,a=e.clientY+t.y),e.pageOffset=t,e.points=[o,a],e.cursor=r||s,e}function re(e){var t=100*(e-c(l,n.ort))/te();return t=h(t),n.dir?100-t:t}function oe(e){var t=100,n=!1;return p.forEach((function(i,r){if(!W(r)){var s=N[r],o=Math.abs(s-e);(o<t||o<=t&&e>s||100===o&&100===t)&&(n=r,t=o)}})),n}function ae(e,t){"mouseout"===e.type&&"HTML"===e.target.nodeName&&null===e.relatedTarget&&le(e,t)}function ce(e,t){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===e.buttons&&0!==t.buttonsProperty)return le(e,t);var i=(n.dir?-1:1)*(e.calcPoint-t.startCalcPoint);we(i>0,100*i/t.baseSize,t.locations,t.handleNumbers,t.connect)}function le(e,t){t.handle&&(g(t.handle,n.cssClasses.active),P-=1),t.listeners.forEach((function(e){L.removeEventListener(e[0],e[1])})),0===P&&(g(I,n.cssClasses.drag),Ee(),e.cursor&&(M.style.cursor="",M.removeEventListener("selectstart",s))),n.events.smoothSteps&&(t.handleNumbers.forEach((function(e){Te(e,N[e],!0,!0,!1,!1)})),t.handleNumbers.forEach((function(e){ve("update",e)}))),t.handleNumbers.forEach((function(e){ve("change",e),ve("set",e),ve("end",e)}))}function ue(e,t){if(!t.handleNumbers.some(W)){var i;1===t.handleNumbers.length&&(i=p[t.handleNumbers[0]].children[0],P+=1,f(i,n.cssClasses.active)),e.stopPropagation();var r=[],o=ne(E.move,L,ce,{target:e.target,handle:i,connect:t.connect,listeners:r,startCalcPoint:e.calcPoint,baseSize:te(),pageOffset:e.pageOffset,handleNumbers:t.handleNumbers,buttonsProperty:e.buttons,locations:N.slice()}),a=ne(E.end,L,le,{target:e.target,handle:i,listeners:r,doNotReject:!0,handleNumbers:t.handleNumbers}),c=ne("mouseout",L,ae,{target:e.target,handle:i,listeners:r,doNotReject:!0,handleNumbers:t.handleNumbers});r.push.apply(r,o.concat(a,c)),e.cursor&&(M.style.cursor=getComputedStyle(e.target).cursor,p.length>1&&f(I,n.cssClasses.drag),M.addEventListener("selectstart",s,!1)),t.handleNumbers.forEach((function(e){ve("start",e)}))}}function he(e){e.stopPropagation();var t=re(e.calcPoint),i=oe(t);!1!==i&&(n.events.snap||u(I,n.cssClasses.tap,n.animationDuration),Te(i,t,!0,!0),Ee(),ve("slide",i,!0),ve("update",i,!0),n.events.snap?ue(e,{handleNumbers:[i]}):(ve("change",i,!0),ve("set",i,!0)))}function de(e){var t=re(e.calcPoint),n=k.getStep(t),i=k.fromStepping(n);Object.keys(R).forEach((function(e){"hover"===e.split(".")[0]&&R[e].forEach((function(e){e.call(Fe,i)}))}))}function pe(e,t){if(B()||W(t))return!1;var i=["Left","Right"],r=["Down","Up"],s=["PageDown","PageUp"],o=["Home","End"];n.dir&&!n.ort?i.reverse():n.ort&&!n.dir&&(r.reverse(),s.reverse());var a,c=e.key.replace("Arrow",""),l=c===s[0],u=c===s[1],h=c===r[0]||c===i[0]||l,d=c===r[1]||c===i[1]||u,p=c===o[0],f=c===o[1];if(!(h||d||p||f))return!0;if(e.preventDefault(),d||h){var g=h?0:1,m=De(t)[g];if(null===m)return!1;!1===m&&(m=k.getDefaultStep(N[t],h,n.keyboardDefaultStep)),m*=u||l?n.keyboardPageMultiplier:n.keyboardMultiplier,m=Math.max(m,1e-7),m*=h?-1:1,a=A[t]+m}else a=f?n.spectrum.xVal[n.spectrum.xVal.length-1]:n.spectrum.xVal[0];return Te(t,k.toStepping(a),!0,!0),ve("slide",t),ve("update",t),ve("change",t),ve("set",t),!1}function fe(e){e.fixed||p.forEach((function(e,t){ne(E.start,e.children[0],ue,{handleNumbers:[t]})})),e.tap&&ne(E.start,l,he,{}),e.hover&&ne(E.move,l,de,{hover:!0}),e.drag&&w.forEach((function(t,i){if(!1!==t&&0!==i&&i!==w.length-1){var r=p[i-1],s=p[i],o=[t],a=[r,s],c=[i-1,i];f(t,n.cssClasses.draggable),e.fixed&&(o.push(r.children[0]),o.push(s.children[0])),e.dragAll&&(a=p,c=x),o.forEach((function(e){ne(E.start,e,ue,{handles:a,handleNumbers:c,connect:t})}))}}))}function ge(e,t){R[e]=R[e]||[],R[e].push(t),"update"===e.split(".")[0]&&p.forEach((function(e,t){ve("update",t)}))}function me(e){return e===O.aria||e===O.tooltips}function _e(e){var t=e&&e.split(".")[0],n=t?e.substring(t.length):e;Object.keys(R).forEach((function(e){var i=e.split(".")[0],r=e.substring(i.length);t&&t!==i||n&&n!==r||me(r)&&n!==r||delete R[e]}))}function ve(e,t,i){Object.keys(R).forEach((function(r){var s=r.split(".")[0];e===s&&R[r].forEach((function(e){e.call(Fe,A.map(n.format.to),t,A.slice(),i||!1,N.slice(),Fe)}))}))}function ye(e,t,i,r,s,o,a){var c;return p.length>1&&!n.events.unconstrained&&(r&&t>0&&(c=k.getAbsoluteDistance(e[t-1],n.margin,!1),i=Math.max(i,c)),s&&t<p.length-1&&(c=k.getAbsoluteDistance(e[t+1],n.margin,!0),i=Math.min(i,c))),p.length>1&&n.limit&&(r&&t>0&&(c=k.getAbsoluteDistance(e[t-1],n.limit,!1),i=Math.min(i,c)),s&&t<p.length-1&&(c=k.getAbsoluteDistance(e[t+1],n.limit,!0),i=Math.max(i,c))),n.padding&&(0===t&&(c=k.getAbsoluteDistance(0,n.padding[0],!1),i=Math.max(i,c)),t===p.length-1&&(c=k.getAbsoluteDistance(100,n.padding[1],!0),i=Math.min(i,c))),a||(i=k.getStep(i)),!((i=h(i))===e[t]&&!o)&&i}function be(e,t){var i=n.ort;return(i?t:e)+", "+(i?e:t)}function we(e,t,i,r,s){var o=i.slice(),a=r[0],c=n.events.smoothSteps,l=[!e,e],u=[e,!e];r=r.slice(),e&&r.reverse(),r.length>1?r.forEach((function(e,n){var i=ye(o,e,o[e]+t,l[n],u[n],!1,c);!1===i?t=0:(t=i-o[e],o[e]=i)})):l=u=[!0];var h=!1;r.forEach((function(e,n){h=Te(e,i[e]+t,l[n],u[n],!1,c)||h})),h&&(r.forEach((function(e){ve("update",e),ve("slide",e)})),null!=s&&ve("drag",a))}function Ce(e,t){return n.dir?100-e-t:e}function Se(e,t){N[e]=t,A[e]=k.fromStepping(t);var i="translate("+be(Ce(t,0)-F+"%","0")+")";p[e].style[n.transformRule]=i,Ie(e),Ie(e+1)}function Ee(){x.forEach((function(e){var t=N[e]>50?-1:1,n=3+(p.length+t*e);p[e].style.zIndex=String(n)}))}function Te(e,t,n,i,r,s){return r||(t=ye(N,e,t,n,i,!1,s)),!1!==t&&(Se(e,t),!0)}function Ie(e){if(w[e]){var t=0,i=100;0!==e&&(t=N[e-1]),e!==w.length-1&&(i=N[e]);var r=i-t,s="translate("+be(Ce(t,r)+"%","0")+")",o="scale("+be(r/100,"1")+")";w[e].style[n.transformRule]=s+" "+o}}function ke(e,t){return null===e||!1===e||void 0===e?N[t]:("number"==typeof e&&(e=String(e)),!1!==(e=n.format.from(e))&&(e=k.toStepping(e)),!1===e||isNaN(e)?N[t]:e)}function Ae(e,t,i){var r=d(e),s=void 0===N[0];t=void 0===t||t,n.animate&&!s&&u(I,n.cssClasses.tap,n.animationDuration),x.forEach((function(e){Te(e,ke(r[e],e),!0,!1,i)}));var o=1===x.length?0:1;if(s&&k.hasNoSize()&&(i=!0,N[0]=0,x.length>1)){var a=100/(x.length-1);x.forEach((function(e){N[e]=e*a}))}for(;o<x.length;++o)x.forEach((function(e){Te(e,N[e],!0,!0,i)}));Ee(),x.forEach((function(e){ve("update",e),null!==r[e]&&t&&ve("set",e)}))}function Ne(e){Ae(n.start,e)}function xe(e,t,n,i){if(!((e=Number(e))>=0&&e<x.length))throw new Error("noUiSlider: invalid handle number, got: "+e);Te(e,ke(t,e),!0,!0,i),ve("update",e),n&&ve("set",e)}function Pe(e){if(void 0===e&&(e=!1),e)return 1===A.length?A[0]:A.slice(0);var t=A.map(n.format.to);return 1===t.length?t[0]:t}function Re(){for(_e(O.aria),_e(O.tooltips),Object.keys(n.cssClasses).forEach((function(e){g(I,n.cssClasses[e])}));I.firstChild;)I.removeChild(I.firstChild);delete I.noUiSlider}function De(e){var t=N[e],i=k.getNearbySteps(t),r=A[e],s=i.thisStep.step,o=null;if(n.snap)return[r-i.stepBefore.startValue||null,i.stepAfter.startValue-r||null];!1!==s&&r+s>i.stepAfter.startValue&&(s=i.stepAfter.startValue-r),o=r>i.thisStep.startValue?i.thisStep.step:!1!==i.stepBefore.step&&r-i.stepBefore.highestStep,100===t?s=null:0===t&&(o=null);var a=k.countStepDecimals();return null!==s&&!1!==s&&(s=Number(s.toFixed(a))),null!==o&&!1!==o&&(o=Number(o.toFixed(a))),[o,s]}function Oe(){return x.map(De)}function Le(e,t){var i=Pe(),s=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];s.forEach((function(t){void 0!==e[t]&&(a[t]=e[t])}));var o=se(a);s.forEach((function(t){void 0!==e[t]&&(n[t]=o[t])})),k=o.spectrum,n.margin=o.margin,n.limit=o.limit,n.padding=o.padding,n.pips?ee(n.pips):Z(),n.tooltips?K():$(),N=[],Ae(r(e.start)?e.start:i,t)}function Me(){l=V(I),H(n.connect,l),fe(n.events),Ae(n.start),n.pips&&ee(n.pips),n.tooltips&&K(),G()}Me();var Fe={destroy:Re,steps:Oe,on:ge,off:_e,get:Pe,set:Ae,setHandle:xe,reset:Ne,__moveHandles:function(e,t,n){we(e,t,N,n)},options:a,updateOptions:Le,target:I,removePips:Z,removeTooltips:$,getPositions:function(){return N.slice()},getTooltips:function(){return S},getOrigins:function(){return p},pips:ee};return Fe}function ae(e,t){if(!e||!e.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var n=oe(e,se(t),t);return e.noUiSlider=n,n}var ce={__spectrum:P,cssClasses:D,create:ae};e.create=ae,e.cssClasses=D,e.default=ce,Object.defineProperty(e,"__esModule",{value:!0})}(t)},95205:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var i;function r(e,t){void 0===t&&(t={});var n=t.registrationOptions;void 0===n&&(n={}),delete t.registrationOptions;var r=function(e){for(var n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];t&&t[e]&&t[e].apply(t,n)};"serviceWorker"in navigator&&i.then((function(){Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))?(!function(e,t,n){fetch(e).then((function(i){404===i.status?(t("error",new Error("Service worker not found at "+e)),a()):-1===i.headers.get("content-type").indexOf("javascript")?(t("error",new Error("Expected "+e+" to have javascript content-type, but received "+i.headers.get("content-type"))),a()):o(e,t,n)})).catch((function(e){return s(t,e)}))}(e,r,n),navigator.serviceWorker.ready.then((function(e){r("ready",e)})).catch((function(e){return s(r,e)}))):(o(e,r,n),navigator.serviceWorker.ready.then((function(e){r("ready",e)})).catch((function(e){return s(r,e)})))}))}function s(e,t){navigator.onLine||e("offline"),e("error",t)}function o(e,t,n){navigator.serviceWorker.register(e,n).then((function(e){t("registered",e),e.waiting?t("updated",e):e.onupdatefound=function(){t("updatefound",e);var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?t("updated",e):t("cached",e))}}})).catch((function(e){return s(t,e)}))}function a(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){return s(emit,e)}))}"undefined"!=typeof window&&(i="undefined"!=typeof Promise?new Promise((function(e){return window.addEventListener("load",e)})):{then:function(e){return window.addEventListener("load",e)}})},70655:function(e,t,n){"use strict";n.d(t,{CR:function(){return a},XA:function(){return o},ZT:function(){return r},ev:function(){return c},pi:function(){return s}});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};Object.create;function o(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o}function c(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create},32238:function(e,t,n){"use strict";n.d(t,{Jn:function(){return w},KN:function(){return E},Mq:function(){return S},Xd:function(){return m},ZF:function(){return C},qX:function(){return _}});var i=n(8463),r=n(53333),s=n(74444),o=n(4424);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const c="@firebase/app",l="0.7.28",u=new r.Yd("@firebase/app"),h="[DEFAULT]",d={[c]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},p=new Map,f=new Map;function g(e,t){try{e.container.addComponent(t)}catch(n){u.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function m(e){const t=e.name;if(f.has(t))return u.debug(`There were multiple attempts to register component ${t}.`),!1;f.set(t,e);for(const t of p.values())g(t,e);return!0}function _(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const v={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},y=new s.LL("app","Firebase",v);class b{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw y.create("app-deleted",{appName:this._name})}}const w="9.9.0";function C(e,t={}){if("object"!=typeof t){t={name:t}}const n=Object.assign({name:h,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw y.create("bad-app-name",{appName:String(r)});const o=p.get(r);if(o){if((0,s.vZ)(e,o.options)&&(0,s.vZ)(n,o.config))return o;throw y.create("duplicate-app",{appName:r})}const a=new i.H0(r);for(const e of f.values())a.addComponent(e);const c=new b(e,n,a);return p.set(r,c),c}function S(e="[DEFAULT]"){const t=p.get(e);if(!t)throw y.create("no-app",{appName:e});return t}function E(e,t,n){var r;let s=null!==(r=d[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void u.warn(e.join(" "))}m(new i.wA(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const T="firebase-heartbeat-store";let I=null;function k(){return I||(I=(0,o.X3)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(T)}}).catch((e=>{throw y.create("storage-open",{originalErrorMessage:e.message})}))),I}async function A(e,t){var n;try{const n=(await k()).transaction(T,"readwrite"),i=n.objectStore(T);return await i.put(t,N(e)),n.done}catch(e){throw y.create("storage-set",{originalErrorMessage:null===(n=e)||void 0===n?void 0:n.message})}}function N(e){return`${e.name}!${e.options.appId}`}class x{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new R(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=P();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=P(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),D(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),D(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=(0,s.L)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function P(){return(new Date).toISOString().substring(0,10)}class R{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.hl)()&&(0,s.eu)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){var t;try{return(await k()).transaction(T).objectStore(T).get(N(e))}catch(e){throw y.create("storage-get",{originalErrorMessage:null===(t=e)||void 0===t?void 0:t.message})}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return A(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return A(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function D(e){return(0,s.L)(JSON.stringify({version:2,heartbeats:e})).length}var O;O="",m(new i.wA("platform-logger",(e=>new a(e)),"PRIVATE")),m(new i.wA("heartbeat",(e=>new x(e)),"PRIVATE")),E(c,l,O),E(c,l,"esm2017"),E("fire-js","")},8463:function(e,t,n){"use strict";n.d(t,{H0:function(){return a},wA:function(){return r}});var i=n(74444);class r{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new i.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===s?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},53333:function(e,t,n){"use strict";n.d(t,{Yd:function(){return l},in:function(){return r}});const i=[];var r;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(r||(r={}));const s={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},o=r.INFO,a={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},c=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=a[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class l{constructor(e){this.name=e,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in r))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...e),this._logHandler(this,r.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...e),this._logHandler(this,r.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,r.INFO,...e),this._logHandler(this,r.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,r.WARN,...e),this._logHandler(this,r.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,r.ERROR,...e),this._logHandler(this,r.ERROR,...e)}}},4424:function(e,t,n){"use strict";n.d(t,{Lj:function(){return m},X3:function(){return g}});let i,r;const s=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap;let u={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("objectStoreNames"===t)return e.objectStoreNames||a.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return p(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(f(this),t),p(s.get(this))}:function(...t){return p(e.apply(f(this),t))}:function(t,...n){const i=e.call(f(this),t,...n);return a.set(i,t.sort?t.sort():[t]),p(i)}}function d(e){return"function"==typeof e?h(e):(e instanceof IDBTransaction&&function(e){if(o.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));o.set(e,t)}(e),t=e,(i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,u):e);var t}function p(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(p(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&s.set(t,e)})).catch((()=>{})),l.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=d(e);return t!==e&&(c.set(e,t),l.set(t,e)),t}const f=e=>l.get(e);function g(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=p(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(p(o.result),e.oldVersion,e.newVersion,p(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}function m(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),p(n).then((()=>{}))}const _=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],y=new Map;function b(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(y.get(t))return y.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=v.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!_.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&s.done]))[0]};return y.set(t,s),s}u=(e=>({...e,get:(t,n,i)=>b(t,n)||e.get(t,n,i),has:(t,n)=>!!b(t,n)||e.has(t,n)}))(u)}}]);